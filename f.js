!function(){const e={name:"FancyFace",version:"1.1.9",settings:{show_movie_type:!0,theme:"default",colored_ratings:!0,show_poster_info:!0,label_position:"top-right",colored_elements:!0,show_original_names:!0,buttons_editor:!0},observer:null};$('<style>\n      @keyframes button-fade-in {\n        from {\n          opacity: 0;\n          transform: translateY(8px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      .full-start__button {\n        opacity: 0;\n      }\n      .full-start__button.hidden {\n        display: none !important;\n      }\n      .button--folder {\n        cursor: pointer;\n      }\n      .full-start-new__buttons {\n        display: flex !important;\n        flex-direction: row !important;\n        flex-wrap: nowrap !important;\n        gap: 0.5em !important;\n        overflow-x: auto;\n      }\n      .full-start-new__buttons.buttons-loading .full-start__button {\n        visibility: hidden !important;\n      }\n      .menu-edit-list__create-folder {\n        background: rgba(100, 200, 100, 0.2);\n        border: 3px solid transparent;\n      }\n      .menu-edit-list__create-folder.focus {\n        background: rgba(100, 200, 100, 0.3);\n        border-color: rgba(255, 255, 255, 0.8);\n      }\n      .menu-edit-list__delete,\n      .menu-edit-list__rename,\n      .menu-edit-list__edit-content {\n        width: 2.4em;\n        height: 2.4em;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n      }\n      .menu-edit-list__delete svg,\n      .menu-edit-list__rename svg,\n      .menu-edit-list__edit-content svg {\n        width: 1.2em !important;\n        height: 1.2em !important;\n      }\n      .menu-edit-list__delete.focus,\n      .menu-edit-list__rename.focus,\n      .menu-edit-list__edit-content.focus {\n        border: 2px solid rgba(255, 255, 255, 0.8);\n        border-radius: 0.3em;\n      }\n      .folder-item .menu-edit-list__move {\n        margin-right: 0;\n      }\n      .folder-create-confirm {\n        background: rgba(100, 200, 100, 0.3);\n        margin-top: 1em;\n        border-radius: 0.3em;\n        border: 3px solid transparent;\n      }\n      .folder-create-confirm.focus {\n        border: 3px solid rgba(255, 255, 255, 0.8);\n      }\n      .bottom-controls {\n        display: flex;\n        gap: 1em;\n        margin-top: 1em;\n      }\n      .bottom-controls > .menu-edit-list__item {\n        width: calc(50% - 0.25em);\n      }\n      .bottom-controls > .menu-edit-list__item > .menu-edit-list__icon {\n        margin: 0;\n      }\n      .folder-reset-button {\n        background: rgba(200, 100, 100, 0.3);\n        border: 3px solid transparent;\n      }\n      .folder-reset-button.focus {\n        background: rgba(200, 100, 100, 0.4);\n        border-color: rgba(255, 255, 255, 0.8);\n      }\n      .menu-edit-list__toggle.focus {\n        border: 2px solid rgba(255, 255, 255, 0.8);\n        border-radius: 0.3em;\n      }\n      .button--folder.folder--no-name {\n        min-width: 3.5em;\n        max-width: 3.5em;\n        justify-content: center;\n      }\n      .button--folder.folder--no-name > span {\n        display: none;\n      }\n      .hidden {\n        display: none !important;\n      }\n      .menu-hide-item {\n        padding: 1em 1.5em;\n\n      }\n      .menu-hide-item .settings-param {\n        padding: 10px 15px !important;\n        margin: 0 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: space-between !important;\n      }\n      .menu-hide-item .settings-param__name {\n        margin: 0 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: space-between !important;\n        width: 100% !important;\n        gap: 0.8em;\n      }\n      .menu-hide-item .settings-param__descr {\n        display: none !important;\n      }\n      .menu-hide-item .menu-hide-icon {\n        width: 30px !important;\n        height: 30px !important;\n      }\n      .menu-hide-item .menu-hide-text {\n        flex-grow: 1 !important;\n      }\n\n      .menu-hide-hidden {\n        color: #ff4e45 !important;\n      }\n      .menu-hide-shown {\n        color: #4caf50 !important;\n      }\n      .section-title .settings-param__name {\n        font-size: 20px !important;\n        font-weight: 600 !important;\n        margin: 25px 0 15px 0 !important;\n        padding-bottom: 8px !important;\n        border-bottom: 2px solid rgba(255, 255, 255, 0.1) !important;\n        color: #fff !important;\n      }\n      .section-divider .settings-param {\n        height: 1px !important;\n        min-height: 1px !important;\n        padding: 0 !important;\n        background: rgba(255, 255, 255, 0.1) !important;\n        margin: 25px 0 !important;\n      }\n      .settings-param.disable-hide {\n        opacity: 0.6 !important;\n        pointer-events: none !important;\n      }\n      .content-label {\n        position: absolute !important;\n        top: 1.4em !important;\n        left: -0.8em !important;\n        color: white !important;\n        padding: 0.5em 0.7em !important;\n        border-radius: 1em !important;\n        font-size: 0.8em !important;\n        z-index: 10 !important;\n      }\n      .serial-label { background-color: #3498db !important; }\n      .movie-label { background-color: #2ecc71 !important; }\n      body[data-movie-labels="on"] .card--tv .card__type { display: none !important; }\n    </style>').appendTo("head"),Lampa.Lang.add({menu_items_hide:{en:"Management of interface elements",uk:"Керування елементами інтерфейсу"},left_menu_title:{en:"Left menu",uk:"Ліве меню"},head_title:{en:"Head menu",uk:"Верхнє меню"},settings_title:{en:"Settings menu",uk:"Праве меню"},hide_description:{en:"Menu for hiding interface elements",uk:"Меню для керування елементами нтерфейсу"},hidden:{en:"Hidden",uk:"Приховано"},shown:{en:"Shown",uk:"Відображається"},no_name:{en:"Unnamed element",uk:"Елемент без назви"},head_action_search:{en:"Search",uk:"Пошук"},head_action_settings:{en:"Settings",uk:"Налаштування"},head_action_feed:{en:"Feed",uk:"Стрічка"},head_action_notice:{en:"Notifications",uk:"Сповіщення"},head_action_profile:{en:"Profile",uk:"Профіль"},head_action_fullscreen:{en:"Fullscreen",uk:"Повноекранний режим"},head_action_broadcast:{en:"Broadcast",uk:"Трансляція"},head_time:{en:"Time",uk:"Час і дата"},buttons_editor_title:{en:"Buttons editor",uk:"Редактор кнопок"},buttons_editor_description:{en:"Toggle the display of the Button Editor in the card",uk:"Перемикання відображення Редактора кнопок в картці"},buttons_editor_on:{en:"The button editor is enabled",uk:"Редактор кнопок увімкнено"},buttons_editor_off:{en:"The button editor is disabled",uk:"Редактор кнопок вимкнено"},new_folder_name:{en:"Enter new folder name",uk:"Введіть нову назву папки"},folder_renamed:{en:"Folder renamed",uk:"Папку перейменовано"},new_button_name:{en:"Enter new button name",uk:"Введіть нову назву кнопки"},button_renamed:{en:"Button renamed",uk:"Кнопку перейменовано"},create_folder:{en:"Create folder",uk:"Створити папку"},folder_deleted:{en:"Folder deleted",uk:"Папку видалено"},folder_buttons_order:{en:"Button order in folder",uk:"Порядок кнопок у папці"},folder_name_title:{en:"Folder name",uk:"Назва папки"},create_folder_no_name:{en:"Create folder without name",uk:"Створити папку без назви"},select_min_2_buttons:{en:"Select at least 2 buttons",uk:"Оберіть щонайменше 2 кнопки"},folder_created_param:{en:'Folder "{folderName}" created',uk:'Папку "{folderName}" створено'},folder_created_no_name:{en:"Unnamed folder created",uk:"Папку без назви створено"},add_content_to_folder:{en:"Add content to folder",uk:"Додайте вміст до папки"},reset_settings:{en:"Reset",uk:"Скинути"},season_one:{en:"season",uk:"сезон"},season_two:{en:"seasons",uk:"сезони"},season_five:{en:"seasons",uk:"сезонів"},episode_one:{en:"episode",uk:"серія"},episode_two:{en:"episodes",uk:"серії"},episode_five:{en:"episodes",uk:"серій"},season_episode_text_completed:{en:"{seasons_count} {seasons_word} {episodes_count} {episodes_word}",uk:"{seasons_count} {seasons_word} {episodes_count} {episodes_word}"},season_episode_text_ongoing:{en:"{seasons_count} {seasons_word} {episodes_count} {episodes_word} from {total_episodes_count}",uk:"{seasons_count} {seasons_word} {episodes_count} {episodes_word} з {total_episodes_count}"},status_ended:{en:"Ended",uk:"Завершено"},status_canceled:{en:"Canceled",uk:"Скасовано"},status_returning_series:{en:"Returning Series",uk:"Виходить"},status_in_production:{en:"In Production",uk:"У виробництві"},status_planned:{en:"Planned",uk:"Заплановано"},status_pilot:{en:"Pilot",uk:"Пілотний"},status_released:{en:"Released",uk:"Випущено"},status_rumored:{en:"Rumored",uk:"За чутками"},status_post_production:{en:"Post Production",uk:"Пост-продакшн"},status_unknown:{en:"Unknown",uk:"Невідомо"},button_settings_title:{en:"Button settings",uk:"Налаштування кнопок"},original_title_label:{en:"Original title:",uk:"Оригінальна назва:"},plugin_fancy_description:{en:"Comprehensive interface improvement for the Lampa application",uk:"Комплексне покращення інтерфейсу для застосунку Lampa"},additional_interface_settings:{en:"Additional interface settings",uk:"Додаткові налаштування інтерфейсу"},poster_info_title:{en:"Information on the poster",uk:"Інформація на постері"},poster_info_description:{en:"Displaying information about series and movie duration",uk:"Відображення інформації про серії та тривалість фільму"},label_position_title:{en:"Location of information on the poster",uk:"Розташування інформації на постері"},label_position_description:{en:"Select the position of the label on the poster",uk:"Оберіть позицію мітки на постері"},label_top_right:{en:"Top right corner",uk:"Верхній правий кут"},label_top_left:{en:"Top left corner",uk:"Верхній лівий кут"},label_bottom_right:{en:"Bottom right corner",uk:"Нижній правий кут"},label_bottom_left:{en:"Bottom left corner",uk:"Нижній лівий кут"},change_labels_title:{en:"Change labels",uk:"Змінити мітки"},change_labels_description:{en:'Change "TV" to "Series" and add a "Movie" label',uk:'Змінити "TV" на "Серіал" та додати мітку "Фільм"'},interface_theme_title:{en:"Interface theme",uk:"Тема інтерфейсу"},interface_theme_description:{en:"Select the interface theme",uk:"Оберіть тему оформлення інтерфейсу"},colored_ratings_title:{en:"Colored ratings",uk:"Кольорові рейтинги"},colored_ratings_description:{en:"Change the rating color depending on the score",uk:"Змінювати колір рейтингу залежно від оцінки"},colored_elements_title:{en:"Colored elements",uk:"Кольорові елементи"},colored_elements_description:{en:"Display series statuses and age restrictions in color",uk:"Відображати статуси серіалів та вікові обмеження кольоровими"},show_original_title:{en:"Show original titles",uk:"Показувати оригінальні назви"},show_original_title_description:{en:"Display the original title of the movie/series in the card",uk:"Відображення оригінальної назви фільму/серіалу в картці"},movie_duration_with_icon:{en:"{icon} {duration}",uk:"{icon} {duration}"},poster_info_on:{en:"Poster info enabled",uk:"Інформація на постері увімкнена"},poster_info_off:{en:"Poster info disabled",uk:"Інформація на постері вимкнена"},change_labels_on:{en:"Labels enabled",uk:"Мітки увімкнено"},change_labels_off:{en:"Labels disabled",uk:"Мітки вимкнено"},colored_ratings_on:{en:"Colored ratings enabled",uk:"Кольорові рейтинги увімкнено"},colored_ratings_off:{en:"Colored ratings disabled",uk:"Кольорові рейтинги вимкнено"},colored_elements_on:{en:"Colored elements enabled",uk:"Кольорові елементи увімкнено"},colored_elements_off:{en:"Colored elements disabled",uk:"Кольорові елементи вимкнено"},show_original_names_on:{en:"Original titles enabled",uk:"Оригінальні назви увімкнено"},show_original_names_off:{en:"Original titles disabled",uk:"Оригінальні назви вимкнено"},label_position_changed:{en:"Label position changed",uk:"Позицію мітки змінено"},reset_settings_noty:{en:"Settings have been reset",uk:"Налаштування скинуто"}});const t={main:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-fire"></use></svg>',edit:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-edit"></use></svg>',eye:'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="white" stroke-width="2"/></svg>',reset:'<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg>',time:'<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-play"></use></svg>',recommendations:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-feed"></use></svg>',facts:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-info"></use></svg>',folder:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-folder"></use></svg>',folder_add:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-plus"></use></svg>',move_up:'<svg style="transform: rotate(90deg);" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#sprite-backward"></use></svg>',move_down:'<svg style="transform: rotate(-90deg);" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#sprite-backward"></use></svg>',edit_content:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-filter"></use></svg>',rename:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>',delete:'<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1.89111" y="1.78369" width="21.793" height="21.793" rx="3.5" stroke="currentColor" stroke-width="3"/><path d="M9.5 9.5L16.5 16.5M16.5 9.5L9.5 16.5" stroke="currentColor" stroke-width="3" stroke-linecap="round"/></svg>'},n=e=>`<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="1.89111" y="1.78369" width="21.793" height="21.793" rx="3.5" stroke="currentColor" stroke-width="3"/>\n<path d="M7.44873 12.9658L10.8179 16.3349L18.1269 9.02588" stroke="currentColor" stroke-width="3" stroke-linecap="round" opacity="${e?"1":"0"}"/>\n</svg>`,o=["button--play","button--edit-order","button--folder"],a=[{name:"shots",patterns:["shots-view-button"]},{name:"online",patterns:["online","lampac","modss","showy"]},{name:"torrent",patterns:["torrent"]},{name:"trailer",patterns:["trailer"]},{name:"book",patterns:["book"]},{name:"reaction",patterns:["reaction"]}];let i=[],s=[],r=[],d=null,l=[];function c(e){let t=r.find((t=>b(t)===e));return t||(t=s.find((t=>b(t)===e))),t}function m(){return Lampa.Storage.get("button_item_order",[])}function u(e){Lampa.Storage.set("button_item_order",e)}function _(){return Lampa.Storage.get("button_hidden",[])}function p(){return Lampa.Storage.get("button_folders",[])}function f(e){Lampa.Storage.set("button_folders",e)}function g(){return Lampa.Storage.get("button_renamed",{})}function h(e){Lampa.Storage.set("button_renamed",e)}function b(e){let t=e.attr("data-stable-id");return t||(t=function(e){const t=e.attr("class")||"",n=e.find("span").clone();n.find("*").remove();const o=n.text().trim().replace(/\s+/g,"_");let a=e.attr("data-subtitle")||"";if(t.includes("modss")||o.includes("MODS")||o.includes("MOD"))return"modss_online_button";if(t.includes("showy")||o.includes("Showy"))return"showy_online_button";if(t.includes("shots-view-button"))return"button_shots";if(t.includes("button--trailer"))return"button_trailer";if(t.includes("button--subscribe"))return"button_subscribe";if(t.includes("button--book"))return"button_bookmarks";if(t.includes("button--reaction"))return"button_reactions";if(t.includes("button--recommendations"))return"button_recommendations";if(t.includes("button--facts"))return"button_facts";a=a.replace(/<[^>]+>/g," ").trim(),a=a.replace(/\s?v\s?\d+\.\d+(\.\d+)?/gi,"").trim(),a=a.replace(/\s+/g,"_");const i=t.split(" ").filter((e=>e.startsWith("view--")||e.startsWith("button--"))).join("_");if(!i&&!o)return"button_unknown";let s=i+"_"+o;return a&&(s=s+"_"+a),s.replace(/__+/g,"_").replace(/_$/,"")}(e),e.attr("data-stable-id",t)),t}function v(e){const t=g();e.forEach((e=>{const n=b(e);t[n]&&e.find("span").text(t[n])}))}function w(e){const t=e.attr("class")||"";for(const e of a)if(e.patterns.some((e=>t.includes(e))))return e.name;return"other"}function L(e){const n=e.find(".full-start__button").not(".button--edit-order, .button--folder, .button--play"),a={online:[],torrent:[],trailer:[],shots:[],book:[],reaction:[],other:[]};return n.each((function(){const e=$(this);if(function(e){const t=e.attr("class")||"";return o.some((e=>t.includes(e)))}(e))return;const n=w(e);if("online"===n&&e.hasClass("lampac--button")&&!e.hasClass("modss--button")&&!e.hasClass("showy--button")){const n=e.find("svg").first();n.length&&!n.hasClass("modss-online-icon")&&n.replaceWith(t.play)}(a[n]||a.other).push(e)})),a}function y(e){const t=Lampa.Storage.get("button_custom_order",[]),n=[],o=[];if(e.forEach((e=>{const t=b(e);"modss_online_button"===t||"showy_online_button"===t?n.push(e):o.push(e)})),n.sort(((e,t)=>{const n=b(e),o=b(t);return"modss_online_button"===n?-1:"modss_online_button"===o?1:"showy_online_button"===n?-1:"showy_online_button"===o?1:0})),!t.length){const e=["online","torrent","trailer","book","reaction","other"];return o.sort(((t,n)=>{let o=w(t),a=w(n),i=e.indexOf(o),s=e.indexOf(a);return-1===i&&(i=999),-1===s&&(s=999),i-s})),[...n,...o]}const a=new Map(o.map((e=>[b(e),e]))),i=[];return t.forEach((e=>{a.has(e)&&(i.push(a.get(e)),a.delete(e))})),[...n,...i,...Array.from(a.values())]}function x(e){const t=_();e.forEach((e=>{const n=b(e);e.toggleClass("hidden",t.includes(n))}))}function k(e){e.forEach(((e,t)=>{e.css({opacity:"0",animation:"button-fade-in 0.4s ease forwards","animation-delay":.08*t+"s"})}))}function S(){!function(e){Lampa.Storage.set("button_custom_order",e)}(i.map((e=>b(e))))}function C(){u($(".menu-edit-list .menu-edit-list__item").not(".menu-edit-list__create-folder").map((function(){const e=$(this),t=e.data("itemType");return"folder"===t?{type:"folder",id:e.data("folderId")}:"button"===t?{type:"button",id:e.data("buttonId")}:null})).get().filter(Boolean))}function E(e,t,n,o){e.children().not(".button--edit-order").detach();const a=[],i=new Set;return t.length>0&&t.forEach((t=>{if("folder"===t.type){const o=n.find((e=>e.id===t.id));if(o&&!i.has(o.id)){const t=M(o);e.append(t),a.push(t),i.add(o.id)}}else if("button"===t.type){const n=o.find((e=>b(e)===t.id));n&&!i.has(t.id)&&(e.append(n),a.push(n),i.add(t.id))}})),n.forEach((t=>{if(!i.has(t.id)){const n=M(t);e.append(n),a.push(n),i.add(t.id)}})),o.forEach((t=>{const n=b(t);i.has(n)||(e.append(t),a.push(t),i.add(n))})),a}function T(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function A(e,t){const n=b(e),o=g();if(o[n])return o[n];let a=e.find("span").text().trim();const i=e.attr("class")||"",s=e.attr("data-subtitle")||"";if(!a){const t=i.split(" ").find((e=>e.startsWith("view--")||e.startsWith("button--")))||"";return a=T(t.replace(/view--|button--|_/g," ")),e.hasClass("button--options")&&(a="Ще"),a||"Кнопка"}if(t.filter((e=>e.find("span").text().trim()===a)).length>1){if(s)return`${a} <span style="opacity:0.5">(${s.substring(0,30)})</span>`;const e=i.split(" ").find((e=>e.startsWith("view--")));if(e){const t=T(e.replace("view--","").replace(/_/g," "));return`${a} <span style="opacity:0.5">(${t})</span>`}}return a}function M(e){const n=c(e.buttons[0]);if(n){const e=n.find("svg").first();e.length&&(t.folder=e.prop("outerHTML"))}const o=e.name&&e.name.trim(),a=$(`\n      <div class="full-start__button selector button--folder${o?"":" folder--no-name"}" data-folder-id="${e.id}">\n        ${t.folder}\n        ${o?`<span>${e.name}</span>`:""}\n      </div>\n    `);return a.on("hover:enter",(()=>function(e){const t=e.buttons.map((e=>{const t=c(e);if(!t)return null;const n=A(t,r),o=t.find("svg").first(),a=o.length?o.prop("outerHTML"):"",i=t.attr("data-subtitle")||"",s={title:n.replace(/<[^>]*>/g,""),button:t,btnId:e};return a&&(s.template="selectbox_icon",s.icon=a),i&&(s.subtitle=i),s})).filter(Boolean);Lampa.Select.show({title:e.name,items:t,onSelect:e=>e.button.trigger("hover:enter"),onBack:()=>Lampa.Controller.toggle("full_start")})}(e))),a}function B(e){const n=$('<div class="menu-edit-list"></div>');e.buttons.forEach((o=>{const a=c(o);if(a){const i=A(a,r),s=a.find("svg").first(),d=s.length?s.clone():$("<svg></svg>"),l=$(`\n          <div class="menu-edit-list__item">\n            <div class="menu-edit-list__icon"></div>\n            <div class="menu-edit-list__title">${i}</div>\n            <div class="menu-edit-list__move move-up selector">\n              ${t.move_up}\n            </div>\n            <div class="menu-edit-list__move move-down selector">\n              ${t.move_down}\n            </div>\n            <div class="menu-edit-list__rename selector">\n                ${t.rename}\n            </div>\n          </div>\n        `);l.find(".menu-edit-list__icon").append(d),l.data("btnId",o),l.find(".move-up").on("hover:enter",(()=>{const t=l.prev();t.length&&(l.insertBefore(t),P(e,n))})),l.find(".move-down").on("hover:enter",(()=>{const t=l.next();t.length&&(l.insertAfter(t),P(e,n))})),l.find(".menu-edit-list__rename").on("hover:enter",(()=>{const t=A(a,r).replace(/<[^>]*>/g,"");Lampa.Modal.close(),setTimeout((()=>{Lampa.Input.edit({free:!0,title:Lampa.Lang.translate("new_button_name"),nosave:!0,value:t,nomic:!0},(t=>{if(t&&t.trim()){const e=g();e[o]=t.trim(),h(e),Lampa.Noty.show(Lampa.Lang.translate("button_renamed"))}B(e)}))}),100)})),n.append(l)}})),Lampa.Modal.open({title:Lampa.Lang.translate("folder_buttons_order"),html:n,size:"small",scroll_to_center:!0,onBack:()=>{Lampa.Modal.close(),F()}})}function P(e,n){const o=n.find(".menu-edit-list__item").map((function(){return $(this).data("btnId")})).get();e.buttons=o;let a=p();const i=a.findIndex((t=>t.id===e.id));-1!==i&&(a[i].buttons=o,f(a)),function(e){if(!e.buttons||0===e.buttons.length)return;const n=d.find(`.button--folder[data-folder-id="${e.id}"]`);if(n.length){const o=c(e.buttons[0]);if(o){const e=o.find("svg").first();e.length&&n.find("svg").replaceWith(e.clone())}else n.find("svg").replaceWith(t.folder)}}(e)}function N(){Lampa.Input.edit({free:!0,title:Lampa.Lang.translate("folder_name_title"),nosave:!0,value:"",nomic:!0},(e=>{!function(e){const t=[],o=$('<div class="menu-edit-list"></div>'),a=p().flatMap((e=>e.buttons)),s=y(r.slice());s.forEach((e=>{const i=b(e);if(a.includes(i))return;const r=A(e,s),d=e.find("svg").first(),l=d.length?d.clone():$("<svg></svg>"),c=$(`\n        <div class="menu-edit-list__item">\n          <div class="menu-edit-list__icon"></div>\n          <div class="menu-edit-list__title">${r}</div>\n          <div class="menu-edit-list__toggle selector">\n            ${n(!1)}\n          </div>\n        </div>\n      `);c.find(".menu-edit-list__icon").append(l),c.find(".menu-edit-list__toggle").on("hover:enter",(()=>{const e=t.indexOf(i);-1!==e?(t.splice(e,1),c.find(".menu-edit-list__toggle").html(n(!1))):(t.push(i),c.find(".menu-edit-list__toggle").html(n(!0)))})),o.append(c)}));const l=e&&e.trim()?`${Lampa.Lang.translate("create_folder")} "${e}"`:Lampa.Lang.translate("create_folder_no_name"),c=$(`\n      <div class="selector folder-create-confirm">\n        <div style="text-align: center; padding: 1em;">${l}</div>\n      </div>\n    `);c.on("hover:enter",(()=>{if(t.length<2)return void Lampa.Noty.show(Lampa.Lang.translate("select_min_2_buttons"));const n=function(e,t){const n=p(),o={id:`folder_${Date.now()}`,name:e,buttons:t};return n.push(o),f(n),o}(e,t);let o=m();0===o.length&&(o=i.map((e=>({type:"button",id:b(e)}))));const a=new Set(t);let s=!1;const r=o.map((e=>"button"===e.type&&a.has(e.id)?s?null:(s=!0,{type:"folder",id:n.id}):e)).filter(Boolean);s||r.push({type:"folder",id:n.id}),u(r),i=i.filter((e=>!a.has(b(e)))),Lampa.Modal.close();const l=e&&e.trim()?Lampa.Lang.translate("folder_created_param").replace("{folderName}",e):Lampa.Lang.translate("folder_created_no_name");Lampa.Noty.show(l),d&&(d.data("buttons-processed",!1),I(d)),j()})),o.append(c),Lampa.Modal.open({title:Lampa.Lang.translate("add_content_to_folder"),html:o,size:"small",scroll_to_center:!0,onBack:()=>{Lampa.Modal.close(),F()}})}(e.trim())}))}function F(){const e=r.map((e=>e.clone(!0,!0)));s=y(e);const o=p(),a=new Set(o.flatMap((e=>e.buttons)));i=s.filter((e=>!a.has(b(e))));const l=$('<div class="menu-edit-list"></div>'),c=_(),w=m();function T(e){const n=$(`\n        <div class="menu-edit-list__item folder-item">\n          <div class="menu-edit-list__icon">\n            ${t.folder}\n          </div>\n          <div class="menu-edit-list__title">${e.name} <span style="opacity:0.5">(${e.buttons.length})</span></div>\n          <div class="menu-edit-list__move move-up selector">\n            ${t.move_up}\n          </div>\n          <div class="menu-edit-list__move move-down selector">\n            ${t.move_down}\n          </div>\n          <div class="menu-edit-list__edit-content selector">\n            ${t.edit_content}\n          </div>\n          <div class="menu-edit-list__rename selector">\n            ${t.rename}\n          </div>\n          <div class="menu-edit-list__delete selector">\n            ${t.delete}\n          </div>\n        </div>\n      `);return n.data("folderId",e.id),n.data("itemType","folder"),n.find(".menu-edit-list__edit-content").on("hover:enter",(()=>{Lampa.Modal.close(),setTimeout((()=>B(e)),100)})),n.find(".move-up").on("hover:enter",(()=>{const e=n.prevAll(":not(.menu-edit-list__create-folder)").first();e.length&&(n.insertBefore(e),C())})),n.find(".move-down").on("hover:enter",(()=>{const e=n.next();e.length&&!e.hasClass("bottom-controls")&&(n.insertAfter(e),C())})),n.find(".menu-edit-list__rename").on("hover:enter",(()=>{Lampa.Modal.close(),setTimeout((()=>{Lampa.Input.edit({title:Lampa.Lang.translate("new_folder_name"),value:e.name,free:!0,nosave:!0,nomic:!0},(t=>{if(t&&t.trim()){const n=p(),o=n.find((t=>t.id===e.id));o&&(o.name=t.trim(),f(n),Lampa.Noty.show(Lampa.Lang.translate("folder_renamed")))}F()}))}),100)})),n.find(".menu-edit-list__delete").on("hover:enter",(()=>{Lampa.Modal.close();const t=e.id;!function(e){let t=p();t=t.filter((t=>t.id!==e)),f(t)}(t);const n=m().filter((e=>!("folder"===e.type&&e.id===t)));if(u(n),d&&r.length>0){const e=d.find(".full-start-new__buttons");e.length&&(e.find(".full-start__button").not(".button--edit-order").remove(),r.forEach((t=>{e.append(t.clone(!0,!0))}))),d.data("buttons-processed",!1),I(d)}setTimeout((()=>{Lampa.Noty.show(Lampa.Lang.translate("folder_deleted")),F()}),100)})),n}function M(e){const o=A(e,i),a=e.find("svg").clone(),s=b(e),r=c.includes(s),l=$(`\n        <div class="menu-edit-list__item">\n          <div class="menu-edit-list__icon"></div>\n          <div class="menu-edit-list__title">${o}</div>\n          <div class="menu-edit-list__move move-up selector">\n            ${t.move_up}\n          </div>\n          <div class="menu-edit-list__move move-down selector">\n            ${t.move_down}\n          </div>\n          <div class="menu-edit-list__rename selector">\n            ${t.rename}\n          </div>\n          <div class="menu-edit-list__toggle selector">\n            ${n(!r)}\n          </div>\n        </div>\n      `);return l.find(".menu-edit-list__icon").append(a),l.data("buttonId",s),l.data("itemType","button"),l.find(".move-up").on("hover:enter",(()=>{const e=l.prevAll(":not(.menu-edit-list__create-folder)").first();e.length&&(l.insertBefore(e),C())})),l.find(".move-down").on("hover:enter",(()=>{const e=l.next();e.length&&!e.hasClass("bottom-controls")&&(l.insertAfter(e),C())})),l.find(".menu-edit-list__rename").on("hover:enter",(()=>{const t=A(e,i).replace(/<[^>]*>/g,"");Lampa.Modal.close(),setTimeout((()=>{Lampa.Input.edit({free:!0,title:Lampa.Lang.translate("new_button_name"),nosave:!0,value:t,nomic:!0},(e=>{if(e&&e.trim()){const t=g();t[s]=e.trim(),h(t),Lampa.Noty.show(Lampa.Lang.translate("button_renamed"))}F()}))}),100)})),l.find(".menu-edit-list__toggle").on("hover:enter",(()=>{let e=_();const t=e.indexOf(s),o=d?d.find('[data-stable-id="'+s+'"]'):$();-1!==t?(e.splice(t,1),l.find(".menu-edit-list__toggle").html(n(!0)),o.length&&o.removeClass("hidden")):(e.push(s),l.find(".menu-edit-list__toggle").html(n(!1)),o.length&&o.addClass("hidden")),function(e){Lampa.Storage.set("button_hidden",e)}(e)})),l}const P=new Set;w.length>0&&w.forEach((e=>{if("folder"===e.type){const t=o.find((t=>t.id===e.id));t&&(l.append(T(t)),P.add(t.id))}else if("button"===e.type){const t=i.find((t=>b(t)===e.id));t&&(l.append(M(t)),P.add(e.id))}})),o.forEach((e=>{P.has(e.id)||l.append(T(e))})),i.forEach((e=>{const t=b(e);P.has(t)||l.append(M(e))}));const j=$(`\n      <div class="menu-edit-list__item menu-edit-list__create-folder selector">\n        <div class="menu-edit-list__icon">\n          ${t.folder_add}\n        </div>\n        <div class="menu-edit-list__title">${Lampa.Lang.translate("create_folder")}</div>\n      </div>\n    `);j.on("hover:enter",(()=>{Lampa.Modal.close(),N()}));const z=$(`\n      <div class="menu-edit-list__item folder-reset-button selector">\n        <div class="menu-edit-list__icon">\n          ${t.reset}\n        </div>\n        <div class="menu-edit-list__title">${Lampa.Lang.translate("reset_settings")}</div>\n      </div>\n    `);z.on("hover:enter",(()=>{if(Lampa.Modal.close(),Lampa.Storage.set("button_renamed",{}),Lampa.Storage.set("button_custom_order",[]),Lampa.Storage.set("button_hidden",[]),Lampa.Storage.set("button_folders",[]),Lampa.Storage.set("button_item_order",[]),d&&r.length>0){const e=d.find(".full-start-new__buttons");e.length&&(e.find(".full-start__button").remove(),r.forEach((t=>{e.append(t.clone(!0,!0))}))),d.data("buttons-processed",!1),I(d)}setTimeout((()=>{Lampa.Noty.show(Lampa.Lang.translate("reset_settings_noty")),F()}),100)}));const R=$('<div class="bottom-controls"></div>');R.append(j),R.append(z),l.append(R),Lampa.Modal.open({title:Lampa.Lang.translate("button_settings_title"),html:l,size:"small",scroll_to_center:!0,onBack:()=>{Lampa.Modal.close(),function(){if(!d)return;const e=L(d),t=Object.values(e).flat();s=y(t);const n=p();let o=!1;n.forEach((e=>{const t=new Set,n=e.buttons.map((e=>{let n=s.find((n=>{const o=b(n);return!t.has(o)&&o===e}));if(n){const e=b(n);return t.add(e),e}return e})).filter(Boolean);n.length!==e.buttons.length&&(e.buttons=n,o=!0)})),o&&f(n);const a=n.flatMap((e=>e.buttons));i=s.filter((e=>!a.includes(b(e)))),x(i);const r=d.find(".full-start-new__buttons");if(!r.length)return;const l=E(r,m(),n,i);v(l.filter((e=>!e.hasClass("button--folder")))),k(l);const c=r.find(".button--edit-order");c.length&&(c.detach(),r.append(c)),S(),setTimeout((()=>{d&&O(d)}),100)}(),Lampa.Controller.toggle("full_start")}})}function I(e){const n=e.find(".full-start-new__buttons");if(!n.length)return!1;d=e,e.find(".button--play, .button--edit-order, .button--folder").remove();const o=L(e),a=Object.values(o).flat();s=y(a),0===r.length&&(r=a.map((e=>e.clone(!0,!0))));const l=p(),c=new Set(l.flatMap((e=>e.buttons)));i=s.filter((e=>!c.has(b(e)))),x(i);let u=E(n,m(),l,i);const _=function(){const e=$(`<div class="full-start__button selector button--edit-order" style="order: 9999;">\n        ${t.edit}\n      </div>`);return e.on("hover:enter",F),!1===Lampa.Storage.get("buttons_editor")&&e.hide(),e}();return n.append(_),u.push(_),v(u.filter((e=>!e.hasClass("button--folder")))),k(u),setTimeout((()=>O(e)),100),!0}function O(e){if(Lampa.Controller&&"function"==typeof Lampa.Controller.toggle)try{Lampa.Controller.toggle("full_start")}catch(e){}}function j(){Lampa.Controller&&"function"==typeof Lampa.Controller.toggle&&setTimeout((()=>{try{Lampa.Controller.toggle("full_start"),d&&setTimeout((()=>O()),100)}catch(e){}}),50)}function z(e,t,n,o){let a=Math.abs(e);return a%=100,a>=5&&a<=20?o:(a%=10,1===a?t:a>=2&&a<=4?n:o)}function R(e,t={}){let n=Lampa.Lang.translate(e);for(const e in t)n=n.replace(`{${e}}`,t[e]);return n}function W(n,o){const a=o.find(".full-start-new__poster"),i=o.find(".full-start-new__details");if(a.find(".card-info-label").remove(),i.length&&i.children("span").show(),"false"===String(e.settings.show_poster_info))return;i.length&&i.children("span").not(":last-child").hide();const{label_position:s}=e.settings;if(!a.length)return;let r;if(n.number_of_seasons){const{airedSeasons:e,airedEpisodes:t,totalSeasons:o,totalEpisodes:a}=function(e){const{number_of_seasons:t=0,number_of_episodes:n=0}=e;let o=0,a=0;const i=new Date;if(e.seasons&&e.seasons.forEach((e=>{0!==e.season_number&&(e.air_date&&new Date(e.air_date)<=i&&o++,e.episodes&&e.episodes.forEach((e=>{e.air_date&&new Date(e.air_date)<=i&&a++})))})),0===a&&e.last_episode_to_air){o=e.last_episode_to_air.season_number||0;const t=e.last_episode_to_air.season_number,n=e.last_episode_to_air.episode_number;e.seasons&&e.seasons.forEach((e=>{0!==e.season_number&&(e.season_number<t?a+=e.episode_count||0:e.season_number===t&&(a+=n))}))}return 0===o&&(o=t),0===a&&(a=n),n>0&&a>n&&(a=n),{airedSeasons:o,airedEpisodes:a,totalSeasons:t,totalEpisodes:n}}(n);let i=e,s=t;const d=z(i,Lampa.Lang.translate("season_one"),Lampa.Lang.translate("season_two"),Lampa.Lang.translate("season_five")),l=z(s,Lampa.Lang.translate("episode_one"),Lampa.Lang.translate("episode_two"),Lampa.Lang.translate("episode_five"));r=$('<div class="card-info-label"></div>');const c="Ended"===n.status||"Canceled"===n.status;if(c){const e=R("season_episode_text_completed",{seasons_count:i,seasons_word:d,episodes_count:s,episodes_word:l});r.append($("<div></div>").text(e))}else{let e=R("season_episode_text_completed",{seasons_count:i,seasons_word:d,episodes_count:s,episodes_word:l});a>0&&t<a&&(e=R("season_episode_text_ongoing",{seasons_count:i,seasons_word:d,episodes_count:t,episodes_word:l,total_episodes_count:a})),r.append($("<div></div>").text(e))}const m={"background-color":c?"rgba(33, 150, 243, 0.8)":"rgba(244, 67, 54, 0.8)"};r.data("styles",m)}else if(n.runtime){const e=`${Math.floor(n.runtime/60)} год ${n.runtime%60} хв`,o=R("movie_duration_with_icon",{icon:t.time,duration:e});r=$('<div class="card-info-label"></div>').html(o);const a={"background-color":"rgba(33, 150, 243, 0.8)",display:"flex","align-items":"center",gap:"0.5em"};r.data("styles",a),r.find("svg").css({width:"1.2em",height:"1.2em"})}if(r){const e={"top-right":{top:"1.4em",right:"-0.8em"},"top-left":{top:"1.4em",left:"-0.8em"},"bottom-right":{bottom:"1.4em",right:"-0.8em"},"bottom-left":{bottom:"1.4em",left:"-0.8em"}},t={position:"absolute",color:"white",padding:"0.5em 0.7em","border-radius":"1em","font-size":"0.8em","z-index":"999","text-align":"center","white-space":"nowrap","line-height":"1.2em","backdrop-filter":"blur(2px)","box-shadow":"0 2px 5px rgba(0, 0, 0, 0.2)"},n=r.data("styles")||{};r.css({...t,...n,...e[s]||e["top-right"]}),setTimeout((()=>{a.css("position","relative").append(r)}),100)}}function D(e){if($(e).find(".content-label").length)return;const t=$(e).find(".card__view");if(!t.length)return;let n=$(e).hasClass("card--tv");const o=$('<div class="content-label"></div>');n?o.addClass("serial-label").text("Серіал"):o.addClass("movie-label").text("Фільм"),t.append(o)}function V(e){if($("#fancyface_mod_theme").remove(),"default"===e)return;const t={neon:"\n    body {\n      background: linear-gradient(135deg, #0d0221 0%, #150734 50%, #1f0c47 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #e13fe4, #9d61d3);\n      color: #fff;\n      box-shadow: 0 0 12px rgba(225,63,228,.4);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #e13fe4!important;\n      box-shadow: 0 0 12px rgba(225,63,228,.4)!important;\n    }\n\n    .items-line__title {\n      color: #e13fe4;\n      animation: neonGlow 2s ease-in-out infinite alternate;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #e13fe4, #9d61d3);\n      box-shadow: 0 0 12px rgba(225,63,228,.4);\n    }\n\n    @keyframes neonGlow {\n      from { text-shadow: 0 0 5px rgba(225,63,228,.4); }\n      to   { text-shadow: 0 0 15px rgba(225,63,228,.9); }\n    }\n  ",pink:"\n    body {\n      background: linear-gradient(135deg, #2d1f3d 0%, #614385 50%, #516395 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #ff6e7f, #bfe9ff);\n      color: #2d1f3d;\n      box-shadow: 0 0 15px rgba(255,110,127,.4);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 2px solid #ff6e7f!important;\n    }\n\n    .items-line__title {\n      color: #ff6e7f;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #ff6e7f, #bfe9ff);\n    }\n  ",aurora:"\n    body {\n      background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #aa4b6b, #6b6b83, #3b8d99);\n      box-shadow: 0 0 20px rgba(170,75,107,.4);\n      transform: scale(1.02);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 2px solid #aa4b6b!important;\n    }\n\n    .items-line__title {\n      color: #aa4b6b;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #aa4b6b, #6b6b83, #3b8d99);\n    }\n  ",emerald:"\n    body {\n      background: linear-gradient(135deg, #1a2a3a 0%, #2c5364 50%, #203a43 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #43cea2, #185a9d);\n      box-shadow: 0 4px 15px rgba(67,206,162,.4);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #43cea2!important;\n      box-shadow: 0 0 20px rgba(67,206,162,.4)!important;\n    }\n\n    .items-line__title {\n      color: #43cea2;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #43cea2, #185a9d);\n      box-shadow: 0 4px 15px rgba(67,206,162,.4);\n    }\n  ",flix:"\n    body {\n      background: linear-gradient(135deg, #141414 0%, #1a1a1a 50%, #0f0f0f 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #e50914, #b20710);\n      box-shadow: 0 4px 12px rgba(229,9,20,.5);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #e50914!important;\n      box-shadow: 0 0 15px rgba(229,9,20,.5)!important;\n    }\n\n    .items-line__title {\n      color: #e50914;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #e50914, #b20710);\n    }\n  ",pulse:"\n    body {\n      background: linear-gradient(135deg, #0a0b1a 0%, #1a1b2f 50%, #0f1023 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #00ddeb, #d800ff);\n      box-shadow: 0 0 15px rgba(0,221,235,.6);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #00ddeb!important;\n      box-shadow: 0 0 15px rgba(0,221,235,.6)!important;\n    }\n\n    .items-line__title {\n      color: #00ddeb;\n      animation: pulseWave 1.8s ease-in-out infinite;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #00ddeb, #d800ff);\n      box-shadow: 0 0 15px rgba(0,221,235,.6);\n    }\n\n    @keyframes pulseWave {\n      0%   { text-shadow: 0 0 4px rgba(0,221,235,.3); }\n      50%  { text-shadow: 0 0 14px rgba(0,221,235,.9); }\n      100% { text-shadow: 0 0 4px rgba(0,221,235,.3); }\n    }\n  ",retro:"\n    body {\n      background: #564335;\n      color: #dfd9ce;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #fef4de, #edcfab);\n      color: #000;\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border-color: #fef4de!important;\n    }\n\n    .items-line__title {\n      color: #fef4de;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #fef4de, #edcfab);\n      color: #000;\n    }\n  "};$('<style id="fancyface_mod_theme"></style>').html(t[e]||"").appendTo("head")}function G(e){const t=$(e).text().match(/(\d+(\.\d+)?)/);if(!t)return;const n=parseFloat(t[0]);let o="";n>=8?o="lawngreen":n>=6?o="cornflowerblue":n>3?o="orange":n>=0&&(o="red"),o&&$(e).css("color",o)}function H(e){const t=$(e).text().trim(),n={completed:{bg:"rgba(46, 204, 113, 0.8)",text:"white"},canceled:{bg:"rgba(231, 76, 60, 0.8)",text:"white"},ongoing:{bg:"rgba(243, 156, 18, 0.8)",text:"black"},production:{bg:"rgba(52, 152, 219, 0.8)",text:"white"}},o={completed:["Випущено","Завершено","Ended"],canceled:["Скасовано","Canceled"],ongoing:["Виходить","Онгоїнг","Returning Series","Ongoing"],production:["У виробництві","In Production"]};for(const a in o)if(o[a].includes(t))return void $(e).css({"background-color":n[a].bg,color:n[a].text,"border-radius":"0.3em",border:"0px","font-size":"1.3em",display:"inline-block"})}function K(e){const t=$(e).text().trim(),n={kids:["G","TV-Y","TV-G","0+","3+"],children:["PG","TV-PG","TV-Y7","6+","7+"],teens:["PG-13","TV-14","12+","13+","14+"],almostAdult:["R","TV-MA","16+","17+"],adult:["NC-17","18+"]},o={kids:{bg:"#2ecc71",text:"white"},children:{bg:"#3498db",text:"white"},teens:{bg:"#f1c40f",text:"black"},almostAdult:{bg:"#e67e22",text:"white"},adult:{bg:"#e74c3c",text:"white"}};for(const a in n)if(n[a].some((e=>t.includes(e))))return void $(e).css({"background-color":o[a].bg,color:o[a].text,"border-radius":"0.3em","font-size":"1.3em",border:"0px"})}function U(){Q(),Lampa.Storage.listener.follow("change",(function(e){"menu_hide"!==e.name&&"head_hidden_items"!==e.name&&"settings_hidden_items"!==e.name||Q()})),e.observer=new MutationObserver((t=>{const n=new Set;t.forEach((t=>{"childList"===t.type&&t.addedNodes.length&&t.addedNodes.forEach((t=>{if(1!==t.nodeType)return;const o=$(t);(o.is(".menu__list, .head__actions, .settings__body")||o.find(".menu__list, .head__actions, .settings__body").length)&&(menuTouched=!0),e.settings.show_movie_type&&(o.hasClass("card")&&n.add(t),o.find(".card").each(((e,t)=>n.add(t)))),e.settings.colored_ratings&&o.find(".card__vote, .full-start__rate, .full-start-new__rate").each(((e,t)=>G(t))),e.settings.colored_elements&&(o.hasClass("full-start__status")&&H(t),o.find(".full-start__status").each(((e,t)=>H(t))),o.hasClass("full-start__pg")&&K(t),o.find(".full-start__pg").each(((e,t)=>K(t))))})),e.settings.show_movie_type&&"attributes"===t.type&&$(t.target).hasClass("card")&&n.add(t.target)})),n.size&&requestAnimationFrame((()=>n.forEach((t=>function(t){e.settings.show_movie_type&&($(t).find(".content-label").remove(),D(t))}(t)))))})),e.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","data-card","data-type"]})}function Y(){const e=Lampa.Storage.get("menu_hide",[]);$(".menu__item").each((function(){const t=$(this);if("edit"===t.data("action")){const e=t.closest(".menu__case");if(e.length>0){const t=e.prev(".menu__split");e.addClass("hidden"),t.length>0&&t.addClass("hidden")}else t.addClass("hidden");return}const n=t.find(".menu__text");if(0===n.length)return;const o=n.text().trim();e.includes(o)?t.addClass("hidden"):t.removeClass("hidden")}))}function q(){const e=Lampa.Storage.get("head_hidden_items",[]);$(".head__action, .head__time").each((function(){const t=$(this);if(t.hasClass("processing"))return;const n=t.attr("class").split(" ");let o=[];for(let e=0;e<n.length;e++)0!==n[e].indexOf("open--")&&"full--screen"!==n[e]&&"notice--icon"!==n[e]&&"head__time"!==n[e]||o.push(n[e]);const a=o.join("_");a&&(e.includes(a)?t.addClass("hidden"):t.removeClass("hidden"))}))}function J(){const e=Lampa.Storage.get("settings_hidden_items",[]);$(".settings-folder").each((function(){const t=$(this),n=t.data("component");n&&"fancy_mod"!==n&&(e.includes(n)?t.addClass("hidden"):t.removeClass("hidden"))}))}function Q(){Y(),q(),J()}function X(e){Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"title"},field:{name:e.title},onRender:e=>e.addClass("section-title")});const t=Lampa.Storage.get(e.storageKey,[]),o=new Set;return $(e.selector).each((function(){const a=$(this),i=e.idExtractor(a);if(!i||o.has(i))return;o.add(i);const s=e.titleExtractor(a),r=e.iconExtractor(a),d=!!e.isProcessingDisabled&&e.isProcessingDisabled(i);Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:r,description:s},onRender:function(o){o.addClass("menu-hide-item"),o.find(".settings-param__descr").remove(),d&&o.find(".settings-param").addClass("disable-hide");const a=o.find(".settings-param__name");a.find("svg, img").addClass("menu-hide-icon");const r=t.includes(i),l=$('<div class="settings-param__value"/>').html(n(!r)),c=$("<span/>").text(s).addClass("menu-hide-text");a.find("svg, img").after(c),a.append(l),o.off("hover:enter").on("hover:enter",(function(){if(d)return;const t=Lampa.Storage.get(e.storageKey,[]),o=t.indexOf(i);-1!==o?t.splice(o,1):t.push(i),Lampa.Storage.set(e.storageKey,t),e.updateFunction();const a=t.includes(i);l.html(n(!a))}))}})})),o}function Z(){Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"theme",type:"select",values:{default:"Немає",neon:"Neon",pink:"Pink",aurora:"Aurora",emerald:"Emerald",flix:"Flix",pulse:"Pulse",retro:"Retro"},default:"default"},field:{name:Lampa.Lang.translate("interface_theme_title"),description:Lampa.Lang.translate("interface_theme_description")},onChange:function(t){e.settings.theme=t,Lampa.Storage.set("theme",t),V(t)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"buttons_editor",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("buttons_editor_title"),description:Lampa.Lang.translate("buttons_editor_description")},onChange:function(t){setTimeout((function(){e.settings.buttons_editor=t,Lampa.Settings.update();"true"===String(t)?($(".button--edit-order").show(),Lampa.Noty.show(Lampa.Lang.translate("buttons_editor_on"))):($(".button--edit-order").hide(),Lampa.Noty.show(Lampa.Lang.translate("buttons_editor_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"show_poster_info",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("poster_info_title"),description:Lampa.Lang.translate("poster_info_description")},onChange:function(t){setTimeout((function(){e.settings.show_poster_info=t,Lampa.Settings.update();const n="true"===String(t);let o=Lampa.Activity.all().find((e=>"full"===e.component));o&&o.activity&&o.activity.refresh&&o.activity.refresh(),Lampa.Noty.show(Lampa.Lang.translate(n?"poster_info_on":"poster_info_off"))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"label_position",type:"select",values:{"top-right":Lampa.Lang.translate("label_top_right"),"top-left":Lampa.Lang.translate("label_top_left"),"bottom-right":Lampa.Lang.translate("label_bottom_right"),"bottom-left":Lampa.Lang.translate("label_bottom_left")},default:"top-right"},field:{name:Lampa.Lang.translate("label_position_title"),description:Lampa.Lang.translate("label_position_description")},onChange:function(t){setTimeout((function(){e.settings.label_position=t,Lampa.Settings.update(),Lampa.Noty.show(Lampa.Lang.translate("label_position_changed"));let n=Lampa.Activity.all().find((e=>"full"===e.component));n&&n.activity&&n.activity.refresh&&n.activity.refresh()}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"show_movie_type",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("change_labels_title"),description:Lampa.Lang.translate("change_labels_description")},onChange:function(t){setTimeout((function(){e.settings.show_movie_type=t,Lampa.Settings.update();const n="true"===String(t);$("body").attr("data-movie-labels",n?"on":"off"),n?($(".card").each((function(){D(this)})),Lampa.Noty.show(Lampa.Lang.translate("change_labels_on"))):($(".content-label").remove(),Lampa.Noty.show(Lampa.Lang.translate("change_labels_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"colored_ratings",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("colored_ratings_title"),description:Lampa.Lang.translate("colored_ratings_description")},onChange:function(t){setTimeout((function(){e.settings.colored_ratings=t,Lampa.Settings.update();"true"===String(t)?($(".card__vote, .full-start__rate, .full-start-new__rate").each((function(){G(this)})),Lampa.Noty.show(Lampa.Lang.translate("colored_ratings_on"))):($(".card__vote, .full-start__rate, .full-start-new__rate").css("color",""),Lampa.Noty.show(Lampa.Lang.translate("colored_ratings_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"colored_elements",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("colored_elements_title"),description:Lampa.Lang.translate("colored_elements_description")},onChange:function(t){setTimeout((function(){e.settings.colored_elements=t,Lampa.Settings.update();"true"===String(t)?($(".full-start__status").each((function(){H(this)})),$(".full-start__pg").each((function(){K(this)})),Lampa.Noty.show(Lampa.Lang.translate("colored_elements_on"))):($(".full-start__status, .full-start__pg").css({"background-color":"",color:"","border-radius":"",border:"","font-size":"",display:""}),Lampa.Noty.show(Lampa.Lang.translate("colored_elements_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"show_original_names",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("show_original_title"),description:Lampa.Lang.translate("show_original_title_description")},onChange:function(t){setTimeout((function(){e.settings.show_original_names=t,Lampa.Settings.update();const n="true"===String(t);let o=Lampa.Activity.all().find((e=>"full"===e.component));o&&o.activity&&o.activity.refresh&&o.activity.refresh(),Lampa.Noty.show(Lampa.Lang.translate(n?"show_original_names_on":"show_original_names_off"))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{type:"button"},field:{name:Lampa.Lang.translate("menu_items_hide"),description:Lampa.Lang.translate("hide_description")},onChange:function(){!function(){Lampa.Settings.params&&Lampa.Settings.params.menu_filter&&(Lampa.Settings.params.menu_filter=[]);if(Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:t.reset,description:Lampa.Lang.translate("reset_settings")},onChange:function(){Lampa.Storage.set("menu_hide",[]),Lampa.Storage.set("head_hidden_items",[]),Lampa.Storage.set("settings_hidden_items",[]),$(".menu-hide-item").each((function(){const e=$(this).find(".settings-param__value");e.length&&e.html(n(!0))})),Lampa.Noty.show(Lampa.Lang.translate("reset_settings_noty"))},onRender:function(e){e.addClass("menu-hide-item");var n=e.find(".settings-param__name"),o=$(`<span class="menu-hide-text">${Lampa.Lang.translate("reset_settings")}</span>`),a=$(t.reset).addClass("menu-hide-icon");n.empty().append(a).append(o),e.find(".settings-param__descr").remove()}}),X({title:Lampa.Lang.translate("left_menu_title"),selector:'.menu__item:not([data-action="edit"])',storageKey:"menu_hide",updateFunction:Y,idExtractor:e=>e.find(".menu__text").text().trim(),titleExtractor:e=>e.find(".menu__text").text().trim(),iconExtractor:e=>{const t=e.find(".menu__ico");return t.length?t.html():"•"}}),Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"space"},field:{},onRender:e=>e.addClass("section-divider")}),X({title:Lampa.Lang.translate("head_title"),selector:".head__action, .head__time",storageKey:"head_hidden_items",updateFunction:q,idExtractor:e=>{if(e.hasClass("processing"))return null;return e.attr("class").split(" ").filter((e=>e.startsWith("open--")||"full--screen"===e||"notice--icon"===e||"head__time"===e)).join("_")},titleExtractor:e=>{const t=e.attr("class").split(" ").filter((e=>e.startsWith("open--")||["full--screen","notice--icon","head__time"].includes(e))).join("_"),n={"open--search":"head_action_search","open--broadcast":"head_action_broadcast","open--settings":"head_action_settings","open--feed":"head_action_feed","notice--icon":"head_action_notice","open--profile":"head_action_profile","full--screen":"head_action_fullscreen",head__time:"head_time"};return Lampa.Lang.translate(n[t]||"no_name")},iconExtractor:e=>e.hasClass("head__time")?t.time:e.find("svg").length?e.html():e.find("img").length?`<img src="${e.find("img").attr("src")}" width="30" height="30" style="display:block;">`:"•"}),Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"space"},field:{},onRender:e=>e.addClass("section-divider")}),Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"title"},field:{name:Lampa.Lang.translate("settings_title")},onRender:e=>e.addClass("section-title")}),l.length>0){const e=Lampa.Storage.get("settings_hidden_items",[]),t="settings_hidden_items";l.forEach((o=>{const{id:a,title:i,icon:s}=o,r="fancy_mod"===a;Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:s,description:i},onRender:function(o){o.addClass("menu-hide-item"),o.find(".settings-param__descr").remove(),r&&o.find(".settings-param").addClass("disable-hide");const s=o.find(".settings-param__name");s.find("svg, img").addClass("menu-hide-icon");const d=e.includes(a),l=$('<div class="settings-param__value"/>').html(n(!d)),c=$("<span/>").text(i).addClass("menu-hide-text");s.find("svg, img").after(c),s.append(l),o.off("hover:enter").on("hover:enter",(function(){if(r)return;const e=Lampa.Storage.get(t,[]),o=e.indexOf(a);-1!==o?e.splice(o,1):e.push(a),Lampa.Storage.set(t,e),J();const i=e.includes(a);l.html(n(!i))}))}})}))}else Lampa.SettingsApi.addParam({component:"menu_filter",param:{},field:{name:"Список порожній",description:"Спочатку відкрийте головне меню налаштувань, щоб плагін міг просканувати його, а потім поверніться сюди."},onRender:e=>e.addClass("settings-param--static")})}(),Lampa.Settings.create("menu_filter",{onBack:function(){Lampa.Settings.create("fancy_mod")}})}})}function ee(){Lampa.Listener.follow("full",(n=>{if("complite"!==n.type)return;r=[],s=[],d=null;const o=n.object.activity.render(),a=o.find(".full-start-new__buttons");W(n.data.movie,o),n.data.movie&&function(t,n){if($(".original_title",n).remove(),"false"===String(e.settings.show_original_names))return;const o=t.original_title||t.original_name;o&&$(".full-start-new__title",n).after(`<div class="original_title" style="margin-bottom: 2em; text-align: left;">\n          <div style="font-size: 1.2em; opacity: 0.8;">${Lampa.Lang.translate("original_title_label")} ${o}</div>\n      </div>`)}(n.data.movie,o);const i=a.find(".button--options");if(i.length){const e=$(`\n          <div class="full-start__button selector button--recommendations">\n            ${t.recommendations}\n            <span>Рекомендації</span>\n          </div>\n        `);e.on("hover:enter",(()=>{Lampa.Activity.push({component:"ai_recommendations",card:n.data.movie})}));const o=$(`\n          <div class="full-start__button selector button--facts">\n            ${t.facts}\n            <span>Цікаві факти</span>\n          </div>\n        `);o.on("hover:enter",(()=>{Lampa.Activity.push({component:"ai_facts",card:n.data.movie})})),a.append(e),a.append(o),i.remove()}a.length&&a.addClass("buttons-loading"),setTimeout((()=>{try{o.data("buttons-processed")||(o.data("buttons-processed",!0),I(o)&&(a.length&&a.removeClass("buttons-loading"),j()))}catch(e){a.length&&a.removeClass("buttons-loading")}}),400)})),Lampa.Settings.listener.follow("open",(e=>{setTimeout((()=>{const t=$('.settings-folder[data-component="fancy_mod"]'),n=$('.settings-folder[data-component="interface"]');t.length&&n.length&&t.insertAfter(n),Q(),"main"===e.name&&(l=[],$(".settings-folder").each((function(){const e=$(this),t=e.data("component"),n=e.find(".settings-folder__name").text().trim()||Lampa.Lang.translate("no_name"),o=e.find(".settings-folder__icon").html()||"•";t&&l.push({id:t,title:n,icon:o})})))}),100)}))}function te(){for(const t in e.settings){const n=e.settings[t];e.settings[t]=Lampa.Storage.get(t,n)}V(e.settings.theme),$("body").attr("data-movie-labels",e.settings.show_movie_type?"on":"off"),e.settings.show_movie_type&&$(".card").each(((e,t)=>D(t))),U()}function ne(){Lampa.Manifest.plugins={name:"FancyFace",version:e.version,description:Lampa.Lang.translate("plugin_fancy_description"),author:"@Niaros"},Lampa.SettingsApi.addComponent({component:"fancy_mod",name:Lampa.Lang.translate("additional_interface_settings"),icon:t.main}),Lampa.SettingsApi.addComponent({component:"menu_filter",name:Lampa.Lang.translate("menu_items_hide"),description:Lampa.Lang.translate("hide_description"),icon:t.eye}),Z(),te(),ee()}window.appready?ne():Lampa.Listener.follow("app",(e=>{"ready"===e.type&&ne()})),window.fancy_mod=e}();