!function(){const e={name:"FancyFace",version:"1.1.7",settings:{show_movie_type:!0,theme:"default",colored_ratings:!0,show_poster_info:!0,label_position:"top-right",colored_elements:!0,show_original_names:!0,buttons_editor:!0},observer:null};$('<style>\n      @keyframes button-fade-in {\n        from {\n          opacity: 0;\n          transform: translateY(8px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      .full-start__button {\n        opacity: 0;\n      }\n      .full-start__button.hidden {\n        display: none !important;\n      }\n      .button--folder {\n        cursor: pointer;\n      }\n      .full-start-new__buttons {\n        display: flex !important;\n        flex-direction: row !important;\n        flex-wrap: wrap !important;\n        gap: 0.5em !important;\n      }\n      .full-start-new__buttons.buttons-loading .full-start__button {\n        visibility: hidden !important;\n      }\n      .menu-edit-list__create-folder {\n        background: rgba(100, 200, 100, 0.2);\n        border: 3px solid transparent;\n      }\n      .menu-edit-list__create-folder.focus {\n        background: rgba(100, 200, 100, 0.3);\n        border-color: rgba(255, 255, 255, 0.8);\n      }\n      .menu-edit-list__delete,\n      .menu-edit-list__rename,\n      .menu-edit-list__edit-content {\n        width: 2.4em;\n        height: 2.4em;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n      }\n      .menu-edit-list__delete svg,\n      .menu-edit-list__rename svg,\n      .menu-edit-list__edit-content svg {\n        width: 1.2em !important;\n        height: 1.2em !important;\n      }\n      .menu-edit-list__delete.focus,\n      .menu-edit-list__rename.focus,\n      .menu-edit-list__edit-content.focus {\n        border: 2px solid rgba(255, 255, 255, 0.8);\n        border-radius: 0.3em;\n      }\n      .folder-item .menu-edit-list__move {\n        margin-right: 0;\n      }\n      .folder-create-confirm {\n        background: rgba(100, 200, 100, 0.3);\n        margin-top: 1em;\n        border-radius: 0.3em;\n        border: 3px solid transparent;\n      }\n      .folder-create-confirm.focus {\n        border: 3px solid rgba(255, 255, 255, 0.8);\n      }\n      .bottom-controls {\n        display: flex;\n        gap: 0.5em;\n        margin-top: 1em;\n      }\n      .bottom-controls > .menu-edit-list__item {\n        width: calc(50% - 0.25em);\n        margin-bottom: 0;\n        justify-content: center;\n      }\n      .folder-reset-button {\n        background: rgba(200, 100, 100, 0.3);\n        border: 3px solid transparent;\n      }\n      .folder-reset-button.focus {\n        background: rgba(200, 100, 100, 0.4);\n        border-color: rgba(255, 255, 255, 0.8);\n      }\n      .menu-edit-list__toggle.focus {\n        border: 2px solid rgba(255, 255, 255, 0.8);\n        border-radius: 0.3em;\n      }\n      .button--folder.folder--no-name {\n        min-width: 3.5em;\n        max-width: 3.5em;\n        justify-content: center;\n      }\n      .button--folder.folder--no-name > span {\n        display: none;\n      }\n      .hidden {\n        display: none !important;\n      }\n      .menu-hide-item {\n        padding: 1em 1.5em;\n\n      }\n      .menu-hide-item .settings-param {\n        padding: 10px 15px !important;\n        margin: 0 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: space-between !important;\n      }\n      .menu-hide-item .settings-param__name {\n        margin: 0 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: space-between !important;\n        width: 100% !important;\n        gap: 0.8em;\n      }\n      .menu-hide-item .settings-param__descr {\n        display: none !important;\n      }\n      .menu-hide-item .menu-hide-icon {\n        width: 30px !important;\n        height: 30px !important;\n      }\n      .menu-hide-item .menu-hide-text {\n        flex-grow: 1 !important;\n      }\n\n      .menu-hide-hidden {\n        color: #ff4e45 !important;\n      }\n      .menu-hide-shown {\n        color: #4caf50 !important;\n      }\n      .section-title .settings-param__name {\n        font-size: 20px !important;\n        font-weight: 600 !important;\n        margin: 25px 0 15px 0 !important;\n        padding-bottom: 8px !important;\n        border-bottom: 2px solid rgba(255, 255, 255, 0.1) !important;\n        color: #fff !important;\n      }\n      .section-divider .settings-param {\n        height: 1px !important;\n        min-height: 1px !important;\n        padding: 0 !important;\n        background: rgba(255, 255, 255, 0.1) !important;\n        margin: 25px 0 !important;\n      }\n      .settings-param.disable-hide {\n        opacity: 0.6 !important;\n        pointer-events: none !important;\n      }\n      .content-label {\n        position: absolute !important;\n        top: 1.4em !important;\n        left: -0.8em !important;\n        color: white !important;\n        padding: 0.5em 0.7em !important;\n        border-radius: 1em !important;\n        font-size: 0.8em !important;\n        z-index: 10 !important;\n      }\n      .serial-label { background-color: #3498db !important; }\n      .movie-label { background-color: #2ecc71 !important; }\n      body[data-movie-labels="on"] .card--tv .card__type { display: none !important; }\n    </style>').appendTo("head"),Lampa.Lang.add({menu_items_hide:{en:"Management of interface elements",uk:"Керування елементами інтерфейсу"},left_menu_title:{en:"Left menu",uk:"Ліве меню"},head_title:{en:"Head menu",uk:"Верхнє меню"},settings_title:{en:"Settings menu",uk:"Праве меню"},hide_description:{en:"Menu for hiding interface elements",uk:"Меню для керування елементами нтерфейсу"},hidden:{en:"Hidden",uk:"Приховано"},shown:{en:"Shown",uk:"Відображається"},no_name:{en:"Unnamed element",uk:"Елемент без назви"},head_action_search:{en:"Search",uk:"Пошук"},head_action_settings:{en:"Settings",uk:"Налаштування"},head_action_feed:{en:"Feed",uk:"Стрічка"},head_action_notice:{en:"Notifications",uk:"Сповіщення"},head_action_profile:{en:"Profile",uk:"Профіль"},head_action_fullscreen:{en:"Fullscreen",uk:"Повноекранний режим"},head_action_broadcast:{en:"Broadcast",uk:"Трансляція"},head_time:{en:"Time",uk:"Час і дата"},buttons_editor_title:{en:"Buttons editor",uk:"Редактор кнопок"},buttons_editor_description:{en:"Toggle the display of the Button Editor in the card",uk:"Перемикання відображення Редактора кнопок в картці"},buttons_editor_on:{en:"The button editor is enabled",uk:"Редактор кнопок увімкнено"},buttons_editor_off:{en:"The button editor is disabled",uk:"Редактор кнопок вимкнено"},new_folder_name:{en:"Enter new folder name",uk:"Введіть нову назву папки"},folder_renamed:{en:"Folder renamed",uk:"Папку перейменовано"},new_button_name:{en:"Enter new button name",uk:"Введіть нову назву кнопки"},button_renamed:{en:"Button renamed",uk:"Кнопку перейменовано"},create_folder:{en:"Create folder",uk:"Створити папку"},folder_deleted:{en:"Folder deleted",uk:"Папку видалено"},folder_buttons_order:{en:"Button order in folder",uk:"Порядок кнопок у папці"},folder_name_title:{en:"Folder name",uk:"Назва папки"},create_folder_no_name:{en:"Create folder without name",uk:"Створити папку без назви"},select_min_2_buttons:{en:"Select at least 2 buttons",uk:"Оберіть щонайменше 2 кнопки"},folder_created_param:{en:'Folder "{folderName}" created',uk:'Папку "{folderName}" створено'},folder_created_no_name:{en:"Unnamed folder created",uk:"Папку без назви створено"},add_content_to_folder:{en:"Add content to folder",uk:"Додайте вміст до папки"},reset_settings:{en:"Reset",uk:"Скинути"},season_one:{en:"season",uk:"сезон"},season_two:{en:"seasons",uk:"сезони"},season_five:{en:"seasons",uk:"сезонів"},episode_one:{en:"episode",uk:"серія"},episode_two:{en:"episodes",uk:"серії"},episode_five:{en:"episodes",uk:"серій"},season_episode_text_completed:{en:"{seasons_count} {seasons_word} {episodes_count} {episodes_word}",uk:"{seasons_count} {seasons_word} {episodes_count} {episodes_word}"},season_episode_text_ongoing:{en:"{seasons_count} {seasons_word} {episodes_count} {episodes_word} from {total_episodes_count}",uk:"{seasons_count} {seasons_word} {episodes_count} {episodes_word} з {total_episodes_count}"},status_ended:{en:"Ended",uk:"Завершено"},status_canceled:{en:"Canceled",uk:"Скасовано"},status_returning_series:{en:"Returning Series",uk:"Виходить"},status_in_production:{en:"In Production",uk:"У виробництві"},status_planned:{en:"Planned",uk:"Заплановано"},status_pilot:{en:"Pilot",uk:"Пілотний"},status_released:{en:"Released",uk:"Випущено"},status_rumored:{en:"Rumored",uk:"За чутками"},status_post_production:{en:"Post Production",uk:"Пост-продакшн"},status_unknown:{en:"Unknown",uk:"Невідомо"},button_settings_title:{en:"Button settings",uk:"Налаштування кнопок"},original_title_label:{en:"Original title:",uk:"Оригінальна назва:"},plugin_fancy_description:{en:"Comprehensive interface improvement for the Lampa application",uk:"Комплексне покращення інтерфейсу для застосунку Lampa"},additional_interface_settings:{en:"Additional interface settings",uk:"Додаткові налаштування інтерфейсу"},poster_info_title:{en:"Information on the poster",uk:"Інформація на постері"},poster_info_description:{en:"Displaying information about series and movie duration",uk:"Відображення інформації про серії та тривалість фільму"},label_position_title:{en:"Location of information on the poster",uk:"Розташування інформації на постері"},label_position_description:{en:"Select the position of the label on the poster",uk:"Оберіть позицію мітки на постері"},label_top_right:{en:"Top right corner",uk:"Верхній правий кут"},label_top_left:{en:"Top left corner",uk:"Верхній лівий кут"},label_bottom_right:{en:"Bottom right corner",uk:"Нижній правий кут"},label_bottom_left:{en:"Bottom left corner",uk:"Нижній лівий кут"},change_labels_title:{en:"Change labels",uk:"Змінити мітки"},change_labels_description:{en:'Change "TV" to "Series" and add a "Movie" label',uk:'Змінити "TV" на "Серіал" та додати мітку "Фільм"'},interface_theme_title:{en:"Interface theme",uk:"Тема інтерфейсу"},interface_theme_description:{en:"Select the interface theme",uk:"Оберіть тему оформлення інтерфейсу"},colored_ratings_title:{en:"Colored ratings",uk:"Кольорові рейтинги"},colored_ratings_description:{en:"Change the rating color depending on the score",uk:"Змінювати колір рейтингу залежно від оцінки"},colored_elements_title:{en:"Colored elements",uk:"Кольорові елементи"},colored_elements_description:{en:"Display series statuses and age restrictions in color",uk:"Відображати статуси серіалів та вікові обмеження кольоровими"},show_original_title:{en:"Show original titles",uk:"Показувати оригінальні назви"},show_original_title_description:{en:"Display the original title of the movie/series in the card",uk:"Відображення оригінальної назви фільму/серіалу в картці"},movie_duration_with_icon:{en:"{icon} {duration}",uk:"{icon} {duration}"},poster_info_on:{en:"Poster info enabled",uk:"Інформація на постері увімкнена"},poster_info_off:{en:"Poster info disabled",uk:"Інформація на постері вимкнена"},change_labels_on:{en:"Labels enabled",uk:"Мітки увімкнено"},change_labels_off:{en:"Labels disabled",uk:"Мітки вимкнено"},colored_ratings_on:{en:"Colored ratings enabled",uk:"Кольорові рейтинги увімкнено"},colored_ratings_off:{en:"Colored ratings disabled",uk:"Кольорові рейтинги вимкнено"},colored_elements_on:{en:"Colored elements enabled",uk:"Кольорові елементи увімкнено"},colored_elements_off:{en:"Colored elements disabled",uk:"Кольорові елементи вимкнено"},show_original_names_on:{en:"Original titles enabled",uk:"Оригінальні назви увімкнено"},show_original_names_off:{en:"Original titles disabled",uk:"Оригінальні назви вимкнено"},label_position_changed:{en:"Label position changed",uk:"Позицію мітки змінено"}});const t='<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path></svg>',n='<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>',o=e=>`<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect x="1.89111" y="1.78369" width="21.793" height="21.793" rx="3.5" stroke="currentColor" stroke-width="3"/>\n<path d="M7.44873 12.9658L10.8179 16.3349L18.1269 9.02588" stroke="currentColor" stroke-width="3" stroke-linecap="round" opacity="${e?"0":"1"}"/>\n</svg>`,a=["button--play","button--edit-order","button--folder"],i=[{name:"shots",patterns:["shots-view-button"],label:"Знімки"},{name:"online",patterns:["online","lampac","modss","showy"],label:"Онлайн"},{name:"torrent",patterns:["torrent"],label:"Торренти"},{name:"trailer",patterns:["trailer","rutube"],label:"Трейлери"},{name:"book",patterns:["book"],label:"Закладки"},{name:"reaction",patterns:["reaction"],label:"Реакції"}];let s=[],r=[],d=[],l=null;function c(e){let t=d.find((t=>w(t)===e));return t||(t=r.find((t=>w(t)===e))),t}function u(){return Lampa.Storage.get("button_custom_order",[])}function m(e){Lampa.Storage.set("button_custom_order",e)}function p(){return Lampa.Storage.get("button_item_order",[])}function _(e){Lampa.Storage.set("button_item_order",e)}function f(){return Lampa.Storage.get("button_hidden",[])}function g(){return Lampa.Storage.get("button_folders",[])}function h(e){Lampa.Storage.set("button_folders",e)}function b(){return Lampa.Storage.get("button_renamed",{})}function v(e){Lampa.Storage.set("button_renamed",e)}function w(e){let t=e.attr("data-stable-id");return t||(t=function(e){const t=e.attr("class")||"",n=e.find("span").text().trim().replace(/\s+/g,"_"),o=e.attr("data-subtitle")||"";if(t.includes("modss")||n.includes("MODS")||n.includes("MOD"))return"modss_online_button";if(t.includes("showy")||n.includes("Showy"))return"showy_online_button";const a=t.split(" ").filter((e=>e.startsWith("view--")||e.startsWith("button--"))).join("_");if(!a&&!n)return"button_unknown";let i=a+"_"+n;return o&&(i=i+"_"+o.replace(/\s+/g,"_").substring(0,30)),i}(e),e.attr("data-stable-id",t)),t}function L(e){const t=b();e.forEach((e=>{const n=w(e);t[n]&&e.find("span").text(t[n])}))}function k(e){const t=e.attr("class")||"";for(const e of i)if(e.patterns.some((e=>t.includes(e))))return e.name;return"other"}function y(e){const t=e.find(".full-start__button").not(".button--edit-order, .button--folder, .button--play"),n={online:[],torrent:[],trailer:[],shots:[],book:[],reaction:[],other:[]};return t.each((function(){const e=$(this);if(function(e){const t=e.attr("class")||"";return a.some((e=>t.includes(e)))}(e))return;const t=k(e);if("online"===t&&e.hasClass("lampac--button")&&!e.hasClass("modss--button")&&!e.hasClass("showy--button")){const t=e.find("svg").first();t.length&&!t.hasClass("modss-online-icon")&&t.replaceWith('<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M 10.234 7.733 L 4.468 11.631 C 3.063 12.581 1.16 11.583 1.16 9.898 L 1.16 2.101 C 1.16 0.415 3.063 -0.582 4.468 0.368 L 10.234 4.266 C 11.511 5.125 11.511 6.874 10.234 7.733 Z" fill="currentColor"></path></svg>')}(n[t]||n.other).push(e)})),n}function x(e){const t=u(),n=[],o=[];if(e.forEach((e=>{const t=w(e);"modss_online_button"===t||"showy_online_button"===t?n.push(e):o.push(e)})),n.sort(((e,t)=>{const n=w(e),o=w(t);return"modss_online_button"===n?-1:"modss_online_button"===o?1:"showy_online_button"===n?-1:"showy_online_button"===o?1:0})),!t.length){const e=["online","torrent","trailer","book","reaction","other"];return o.sort(((t,n)=>{let o=k(t),a=k(n),i=e.indexOf(o),s=e.indexOf(a);return-1===i&&(i=999),-1===s&&(s=999),i-s})),[...n,...o]}const a=new Map(o.map((e=>[w(e),e]))),i=[];return t.forEach((e=>{a.has(e)&&(i.push(a.get(e)),a.delete(e))})),[...n,...i,...Array.from(a.values())]}function C(e){const t=f();e.forEach((e=>{const n=w(e);e.toggleClass("hidden",t.includes(n))}))}function S(e){e.forEach(((e,t)=>{e.css({opacity:"0",animation:"button-fade-in 0.4s ease forwards","animation-delay":.08*t+"s"})}))}function M(){_($(".menu-edit-list .menu-edit-list__item").not(".menu-edit-list__create-folder").map((function(){const e=$(this),t=e.data("itemType");return"folder"===t?{type:"folder",id:e.data("folderId")}:"button"===t?{type:"button",id:e.data("buttonId")}:null})).get().filter(Boolean))}function B(){if(!l)return;const e=y(l),t=Object.values(e).flat();r=x(t);const n=g();let o=!1;n.forEach((e=>{const t=new Set,n=e.buttons.map((e=>{let n=r.find((n=>{const o=w(n);return!t.has(o)&&o===e}));if(n){const e=w(n);return t.add(e),e}return e})).filter(Boolean);n.length!==e.buttons.length&&(e.buttons=n,o=!0)})),o&&h(n);const a=n.flatMap((e=>e.buttons));s=r.filter((e=>!a.includes(w(e)))),C(s);const i=l.find(".full-start-new__buttons");if(!i.length)return;i.find(".full-start__button").not(".button--edit-order").detach();const d=p();let c=[];const u=new Set;d.length>0&&d.forEach((e=>{if("folder"===e.type){const t=n.find((t=>t.id===e.id));if(t&&!u.has(t.id)){const e=E(t);i.append(e),c.push(e),u.add(t.id)}}else if("button"===e.type){const t=s.find((t=>w(t)===e.id&&!t.hasClass("hidden")));t&&!u.has(e.id)&&(i.append(t),c.push(t),u.add(e.id))}})),n.forEach((e=>{if(!u.has(e.id)){const t=E(e);i.append(t),c.push(t),u.add(e.id)}})),s.forEach((e=>{const t=w(e);u.has(t)||e.hasClass("hidden")||(i.append(e),c.push(e),u.add(t))})),L(c.filter((e=>!e.hasClass("button--folder")))),S(c);const _=i.find(".button--edit-order");_.length&&(_.detach(),i.append(_)),m(s.map((e=>w(e)))),setTimeout((()=>{l&&O(l)}),100)}function T(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function A(e,t){const n=w(e),o=b();if(o[n])return o[n];let a=e.find("span").text().trim();const i=e.attr("class")||"",s=e.attr("data-subtitle")||"";if(!a){const t=i.split(" ").find((e=>e.startsWith("view--")||e.startsWith("button--")))||"";return a=T(t.replace(/view--|button--|_/g," ")),e.hasClass("button--options")&&(a="Ще"),a||"Кнопка"}if(t.filter((e=>e.find("span").text().trim()===a)).length>1){if(s)return`${a} <span style="opacity:0.5">(${s.substring(0,30)})</span>`;const e=i.split(" ").find((e=>e.startsWith("view--")));if(e){const t=T(e.replace("view--","").replace(/_/g," "));return`${a} <span style="opacity:0.5">(${t})</span>`}}return a}function E(e){const t=c(e.buttons[0]);let n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>';if(t){const e=t.find("svg").first();e.length&&(n=e.prop("outerHTML"))}const o=e.name&&e.name.trim(),a=$(`\n      <div class="full-start__button selector button--folder${o?"":" folder--no-name"}" data-folder-id="${e.id}">\n        ${n}\n        ${o?`<span>${e.name}</span>`:""}\n      </div>\n    `);return a.on("hover:enter",(()=>function(e){const t=e.buttons.map((e=>{const t=c(e);if(!t)return null;const n=A(t,d),o=t.find("svg").first(),a=o.length?o.prop("outerHTML"):"",i=t.attr("data-subtitle")||"",s={title:n.replace(/<[^>]*>/g,""),button:t,btnId:e};return a&&(s.template="selectbox_icon",s.icon=a),i&&(s.subtitle=i),s})).filter(Boolean);Lampa.Select.show({title:e.name,items:t,onSelect:e=>e.button.trigger("hover:enter"),onBack:()=>Lampa.Controller.toggle("full_start")})}(e))),a}function P(e){const t=$('<div class="menu-edit-list"></div>');e.buttons.forEach((n=>{const o=c(n);if(o){const a=A(o,d),i=o.find("svg").first(),s=i.length?i.clone():$("<svg></svg>"),r=$(`\n          <div class="menu-edit-list__item">\n            <div class="menu-edit-list__icon"></div>\n            <div class="menu-edit-list__title">${a}</div>\n            <div class="menu-edit-list__move move-up selector">\n              <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12L11 3L20 12" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>\n            </div>\n            <div class="menu-edit-list__move move-down selector">\n              <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2L11 11L20 2" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>\n            </div>\n            <div class="menu-edit-list__rename selector">\n                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>\n            </div>\n          </div>\n        `);r.find(".menu-edit-list__icon").append(s),r.data("btnId",n),r.find(".move-up").on("hover:enter",(()=>{const n=r.prev();n.length&&(r.insertBefore(n),N(e,t))})),r.find(".move-down").on("hover:enter",(()=>{const n=r.next();n.length&&(r.insertAfter(n),N(e,t))})),r.find(".menu-edit-list__rename").on("hover:enter",(()=>{const t=A(o,d).replace(/<[^>]*>/g,"");Lampa.Modal.close(),setTimeout((()=>{Lampa.Input.edit({free:!0,title:Lampa.Lang.translate("new_button_name"),nosave:!0,value:t,nomic:!0},(t=>{if(t&&t.trim()){const e=b();e[n]=t.trim(),v(e),Lampa.Noty.show(Lampa.Lang.translate("button_renamed"))}P(e)}))}),100)})),t.append(r)}})),Lampa.Modal.open({title:Lampa.Lang.translate("folder_buttons_order"),html:t,size:"small",scroll_to_center:!0,onBack:()=>{Lampa.Modal.close(),z()}})}function N(e,t){const n=t.find(".menu-edit-list__item").map((function(){return $(this).data("btnId")})).get();e.buttons=n;let o=g();const a=o.findIndex((t=>t.id===e.id));-1!==a&&(o[a].buttons=n,h(o)),function(e){if(!e.buttons||0===e.buttons.length)return;const t=l.find(`.button--folder[data-folder-id="${e.id}"]`);if(t.length){const n=c(e.buttons[0]);if(n){const e=n.find("svg").first();e.length&&t.find("svg").replaceWith(e.clone())}else{const e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>';t.find("svg").replaceWith(e)}}}(e)}function j(){Lampa.Input.edit({free:!0,title:Lampa.Lang.translate("folder_name_title"),nosave:!0,value:"",nomic:!0},(e=>{!function(e){const t=[],n=$('<div class="menu-edit-list"></div>'),o=g().flatMap((e=>e.buttons)),a=x(d.slice());a.forEach((e=>{const i=w(e);if(o.includes(i))return;const s=A(e,a),r=e.find("svg").first(),d=r.length?r.clone():$("<svg></svg>"),l=$(`\n        <div class="menu-edit-list__item">\n          <div class="menu-edit-list__icon"></div>\n          <div class="menu-edit-list__title">${s}</div>\n          <div class="menu-edit-list__toggle selector">\n            <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <rect x="1.89111" y="1.78369" width="21.793" height="21.793" rx="3.5" stroke="currentColor" stroke-width="3"/>\n              <path d="M7.44873 12.9658L10.8179 16.3349L18.1269 9.02588" stroke="currentColor" stroke-width="3" class="dot" opacity="0" stroke-linecap="round"/>\n            </svg>\n          </div>\n        </div>\n      `);l.find(".menu-edit-list__icon").append(d),l.find(".menu-edit-list__toggle").on("hover:enter",(()=>{const e=t.indexOf(i);-1!==e?(t.splice(e,1),l.find(".dot").attr("opacity","0")):(t.push(i),l.find(".dot").attr("opacity","1"))})),n.append(l)}));const i=e&&e.trim()?`${Lampa.Lang.translate("create_folder")} "${e}"`:Lampa.Lang.translate("create_folder_no_name"),r=$(`\n      <div class="selector folder-create-confirm">\n        <div style="text-align: center; padding: 1em;">${i}</div>\n      </div>\n    `);r.on("hover:enter",(()=>{if(t.length<2)return void Lampa.Noty.show(Lampa.Lang.translate("select_min_2_buttons"));const n=function(e,t){const n=g(),o={id:`folder_${Date.now()}`,name:e,buttons:t};return n.push(o),h(n),o}(e,t);let o=p();0===o.length&&(o=s.map((e=>({type:"button",id:w(e)}))));const a=new Set(t);let i=!1;const r=o.map((e=>"button"===e.type&&a.has(e.id)?i?null:(i=!0,{type:"folder",id:n.id}):e)).filter(Boolean);i||r.push({type:"folder",id:n.id}),_(r),s=s.filter((e=>!a.has(w(e)))),Lampa.Modal.close();const d=e&&e.trim()?Lampa.Lang.translate("folder_created_param").replace("{folderName}",e):Lampa.Lang.translate("folder_created_no_name");Lampa.Noty.show(d),l&&(l.data("buttons-processed",!1),V(l)),H()})),n.append(r),Lampa.Modal.open({title:Lampa.Lang.translate("add_content_to_folder"),html:n,size:"medium",scroll_to_center:!0,onBack:()=>{Lampa.Modal.close(),z()}})}(e.trim())}))}function z(){if(l){const e=y(l),t=Object.values(e).flat();r=x(t);const n=g().flatMap((e=>e.buttons));s=r.filter((e=>!n.includes(w(e))))}const e=$('<div class="menu-edit-list"></div>'),t=f(),n=g(),o=p();function a(e){const t=$(`\n        <div class="menu-edit-list__item folder-item">\n          <div class="menu-edit-list__icon">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>\n          </div>\n          <div class="menu-edit-list__title">${e.name} <span style="opacity:0.5">(${e.buttons.length})</span></div>\n          <div class="menu-edit-list__move move-up selector">\n            <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12L11 3L20 12" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>\n          </div>\n          <div class="menu-edit-list__move move-down selector">\n            <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2L11 11L20 2" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>\n          </div>\n          <div class="menu-edit-list__edit-content selector">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>\n          </div>\n          <div class="menu-edit-list__rename selector">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>\n          </div>\n          <div class="menu-edit-list__delete selector">\n            <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="1.89111" y="1.78369" width="21.793" height="21.793" rx="3.5" stroke="currentColor" stroke-width="3"/><path d="M9.5 9.5L16.5 16.5M16.5 9.5L9.5 16.5" stroke="currentColor" stroke-width="3" stroke-linecap="round"/></svg>\n          </div>\n        </div>\n      `);return t.data("folderId",e.id),t.data("itemType","folder"),t.find(".menu-edit-list__edit-content").on("hover:enter",(()=>{Lampa.Modal.close(),setTimeout((()=>P(e)),100)})),t.find(".move-up").on("hover:enter",(()=>{const e=t.prevAll(":not(.menu-edit-list__create-folder)").first();e.length&&(t.insertBefore(e),M())})),t.find(".move-down").on("hover:enter",(()=>{const e=t.nextAll(":not(.folder-reset-button)").first();e.length&&(t.insertAfter(e),M())})),t.find(".menu-edit-list__rename").on("hover:enter",(()=>{Lampa.Modal.close(),setTimeout((()=>{Lampa.Input.edit({title:Lampa.Lang.translate("new_folder_name"),value:e.name,free:!0,nosave:!0,nomic:!0},(t=>{if(t&&t.trim()){const n=g(),o=n.find((t=>t.id===e.id));o&&(o.name=t.trim(),h(n),Lampa.Noty.show(Lampa.Lang.translate("folder_renamed")))}z()}))}),100)})),t.find(".menu-edit-list__delete").on("hover:enter",(()=>{const n=e.id,o=new Set(e.buttons);!function(e){let t=g();t=t.filter((t=>t.id!==e)),h(t)}(n);const a=p().filter((e=>!("folder"===e.type&&e.id===n||"button"===e.type&&o.has(e.id))));_(a);m(u().filter((e=>!o.has(e)))),t.remove(),Lampa.Noty.show(Lampa.Lang.translate("folder_deleted")),setTimeout((()=>{l&&(l.data("buttons-processed",!1),V(l),z())}),50)})),t}function i(e){const n=A(e,s),o=e.find("svg").clone(),a=w(e),i=t.includes(a),r=$(`\n        <div class="menu-edit-list__item">\n          <div class="menu-edit-list__icon"></div>\n          <div class="menu-edit-list__title">${n}</div>\n          <div class="menu-edit-list__move move-up selector">\n            <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12L11 3L20 12" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>\n          </div>\n          <div class="menu-edit-list__move move-down selector">\n            <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 2L11 11L20 2" stroke="currentColor" stroke-width="4" stroke-linecap="round"/></svg>\n          </div>\n          <div class="menu-edit-list__rename selector">\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>\n          </div>\n          <div class="menu-edit-list__toggle toggle selector">\n            <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <rect x="1.89111" y="1.78369" width="21.793" height="21.793" rx="3.5" stroke="currentColor" stroke-width="3"/>\n              <path d="M7.44873 12.9658L10.8179 16.3349L18.1269 9.02588" stroke="currentColor" stroke-width="3" class="dot" opacity="${i?"0":"1"}" stroke-linecap="round"/>\n            </svg>\n          </div>\n        </div>\n      `);return r.find(".menu-edit-list__icon").append(o),r.data("buttonId",a),r.data("itemType","button"),r.find(".move-up").on("hover:enter",(()=>{const e=r.prevAll(":not(.menu-edit-list__create-folder)").first();e.length&&(r.insertBefore(e),M())})),r.find(".move-down").on("hover:enter",(()=>{const e=r.nextAll(":not(.folder-reset-button)").first();e.length&&(r.insertAfter(e),M())})),r.find(".menu-edit-list__rename").on("hover:enter",(()=>{const t=A(e,s).replace(/<[^>]*>/g,"");Lampa.Modal.close(),setTimeout((()=>{Lampa.Input.edit({free:!0,title:Lampa.Lang.translate("new_button_name"),nosave:!0,value:t,nomic:!0},(e=>{if(e&&e.trim()){const t=b();t[a]=e.trim(),v(t),Lampa.Noty.show(Lampa.Lang.translate("button_renamed"))}z()}))}),100)})),r.find(".toggle").on("hover:enter",(()=>{let t=f();const n=t.indexOf(a);-1!==n?(t.splice(n,1),e.removeClass("hidden"),r.find(".dot").attr("opacity","1")):(t.push(a),e.addClass("hidden"),r.find(".dot").attr("opacity","0")),function(e){Lampa.Storage.set("button_hidden",e)}(t)})),r}const c=new Set;o.length>0&&o.forEach((t=>{if("folder"===t.type){const o=n.find((e=>e.id===t.id));o&&(e.append(a(o)),c.add(o.id))}else if("button"===t.type){const n=s.find((e=>w(e)===t.id));n&&(e.append(i(n)),c.add(t.id))}})),n.forEach((t=>{c.has(t.id)||e.append(a(t))})),s.forEach((t=>{const n=w(t);c.has(n)||e.append(i(t))}));const L=$(`\n      <div class="menu-edit-list__item menu-edit-list__create-folder selector">\n        <div class="menu-edit-list__icon">\n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>\n        </div>\n        <div class="menu-edit-list__title">${Lampa.Lang.translate("create_folder")}</div>\n      </div>\n    `);L.on("hover:enter",(()=>{Lampa.Modal.close(),j()}));const k=$(`\n      <div class="menu-edit-list__item folder-reset-button selector">\n        <div class="menu-edit-list__icon">\n          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>\n        </div>\n        <div class="menu-edit-list__title">${Lampa.Lang.translate("reset_settings")}</div>\n      </div>\n    `);k.on("hover:enter",(()=>{Lampa.Storage.set("button_renamed",{}),Lampa.Storage.set("button_custom_order",[]),Lampa.Storage.set("button_hidden",[]),Lampa.Storage.set("button_folders",[]),Lampa.Storage.set("button_item_order",[]),Lampa.Modal.close(),Lampa.Noty.show("Налаштування скинуто"),setTimeout((()=>{if(l){const e=l.find(".full-start-new__buttons");e.length&&(e.find(".full-start__button").remove(),d.forEach((t=>{e.append(t.clone(!0,!0))}))),l.data("buttons-processed",!1),V(l),H()}}),100)}));const C=$('<div class="bottom-controls"></div>');C.append(L),C.append(k),e.append(C),Lampa.Modal.open({title:Lampa.Lang.translate("button_settings_title"),html:e,size:"small",scroll_to_center:!0,onBack:()=>{Lampa.Modal.close(),B(),Lampa.Controller.toggle("full_start")}})}function V(e){const t=e.find(".full-start-new__buttons");if(!t.length)return!1;l=e,e.find(".button--play, .button--edit-order, .button--folder").remove();const n=y(e),o=Object.values(n).flat();r=x(o),0===d.length&&(d=o.map((e=>e.clone(!0,!0))));const a=g(),i=new Set(a.flatMap((e=>e.buttons)));s=r.filter((e=>!i.has(w(e)))),C(s),t.children().detach();let c=[];const u=p(),m=new Set;u.length>0&&u.forEach((e=>{if("folder"===e.type){const n=a.find((t=>t.id===e.id));if(n&&!m.has(n.id)){const e=E(n);t.append(e),c.push(e),m.add(n.id)}}else if("button"===e.type){const n=s.find((t=>w(t)===e.id&&!t.hasClass("hidden")));n&&!m.has(e.id)&&(t.append(n),c.push(n),m.add(e.id))}})),a.forEach((e=>{if(!m.has(e.id)){const n=E(e);t.append(n),c.push(n),m.add(e.id)}})),s.forEach((e=>{const n=w(e);m.has(n)||e.hasClass("hidden")||(t.append(e),c.push(e),m.add(n))}));const _=function(){const e=$('<div class="full-start__button selector button--edit-order" style="order: 9999;">\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 29" fill="none"><use xlink:href="#sprite-edit"></use></svg>\n      </div>');return e.on("hover:enter",z),!1===Lampa.Storage.get("buttons_editor")&&e.hide(),e}();return t.append(_),c.push(_),L(c.filter((e=>!e.hasClass("button--folder")))),S(c),setTimeout((()=>O(e)),100),!0}function O(e){if(Lampa.Controller&&"function"==typeof Lampa.Controller.toggle)try{Lampa.Controller.toggle("full_start")}catch(e){}}function H(){Lampa.Controller&&"function"==typeof Lampa.Controller.toggle&&setTimeout((()=>{try{Lampa.Controller.toggle("full_start"),l&&setTimeout((()=>O()),100)}catch(e){}}),50)}function I(e,t,n,o){let a=Math.abs(e);return a%=100,a>=5&&a<=20?o:(a%=10,1===a?t:a>=2&&a<=4?n:o)}function R(e,t={}){let n=Lampa.Lang.translate(e);for(const e in t)n=n.replace(`{${e}}`,t[e]);return n}function F(t,o){const a=o.find(".full-start-new__poster"),i=o.find(".full-start-new__details");if(a.find(".card-info-label").remove(),i.length&&i.children("span").show(),"false"===String(e.settings.show_poster_info))return;i.length&&i.children("span").not(":last-child").hide();const{label_position:s}=e.settings;if(!a.length)return;let r;if(t.number_of_seasons){const{airedSeasons:e,airedEpisodes:n,totalSeasons:o,totalEpisodes:a}=function(e){const{number_of_seasons:t=0,number_of_episodes:n=0}=e;let o=0,a=0;const i=new Date;if(e.seasons&&e.seasons.forEach((e=>{0!==e.season_number&&(e.air_date&&new Date(e.air_date)<=i&&o++,e.episodes&&e.episodes.forEach((e=>{e.air_date&&new Date(e.air_date)<=i&&a++})))})),0===a&&e.last_episode_to_air){o=e.last_episode_to_air.season_number||0;const t=e.last_episode_to_air.season_number,n=e.last_episode_to_air.episode_number;e.seasons&&e.seasons.forEach((e=>{0!==e.season_number&&(e.season_number<t?a+=e.episode_count||0:e.season_number===t&&(a+=n))}))}return 0===o&&(o=t),0===a&&(a=n),n>0&&a>n&&(a=n),{airedSeasons:o,airedEpisodes:a,totalSeasons:t,totalEpisodes:n}}(t);let i=e,s=n;const d=I(i,Lampa.Lang.translate("season_one"),Lampa.Lang.translate("season_two"),Lampa.Lang.translate("season_five")),l=I(s,Lampa.Lang.translate("episode_one"),Lampa.Lang.translate("episode_two"),Lampa.Lang.translate("episode_five"));r=$('<div class="card-info-label"></div>');const c="Ended"===t.status||"Canceled"===t.status;if(c){const e=R("season_episode_text_completed",{seasons_count:i,seasons_word:d,episodes_count:s,episodes_word:l});r.append($("<div></div>").text(e))}else{let e=R("season_episode_text_completed",{seasons_count:i,seasons_word:d,episodes_count:s,episodes_word:l});a>0&&n<a&&(e=R("season_episode_text_ongoing",{seasons_count:i,seasons_word:d,episodes_count:n,episodes_word:l,total_episodes_count:a})),r.append($("<div></div>").text(e))}const u={"background-color":c?"rgba(33, 150, 243, 0.8)":"rgba(244, 67, 54, 0.8)"};r.data("styles",u)}else if(t.runtime){const e=Math.floor(t.runtime/60),o=t.runtime%60,a=R("movie_duration_with_icon",{icon:n,duration:`${e} год ${o} хв`});r=$('<div class="card-info-label"></div>').html(a);const i={"background-color":"rgba(33, 150, 243, 0.8)",display:"flex","align-items":"center",gap:"0.5em"};r.data("styles",i),r.find("svg").css({width:"1.2em",height:"1.2em"})}if(r){const e={"top-right":{top:"1.4em",right:"-0.8em"},"top-left":{top:"1.4em",left:"-0.8em"},"bottom-right":{bottom:"1.4em",right:"-0.8em"},"bottom-left":{bottom:"1.4em",left:"-0.8em"}},t={position:"absolute",color:"white",padding:"0.5em 0.7em","border-radius":"1em","font-size":"0.8em","z-index":"999","text-align":"center","white-space":"nowrap","line-height":"1.2em","backdrop-filter":"blur(2px)","box-shadow":"0 2px 5px rgba(0, 0, 0, 0.2)"},n=r.data("styles")||{};r.css({...t,...n,...e[s]||e["top-right"]}),setTimeout((()=>{a.css("position","relative").append(r)}),100)}}function W(e){if($(e).find(".content-label").length)return;const t=$(e).find(".card__view");if(!t.length)return;let n=$(e).hasClass("card--tv");const o=$('<div class="content-label"></div>');n?o.addClass("serial-label").text("Серіал"):o.addClass("movie-label").text("Фільм"),t.append(o)}function Z(e){if($("#fancyface_mod_theme").remove(),"default"===e)return;const t={neon:"\n    body {\n      background: linear-gradient(135deg, #0d0221 0%, #150734 50%, #1f0c47 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #e13fe4, #9d61d3);\n      color: #fff;\n      box-shadow: 0 0 12px rgba(225,63,228,.4);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #e13fe4;\n      box-shadow: 0 0 12px rgba(225,63,228,.4);\n    }\n\n    .items-line__title {\n      color: #e13fe4;\n      animation: neonGlow 2s ease-in-out infinite alternate;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #e13fe4, #9d61d3);\n      box-shadow: 0 0 12px rgba(225,63,228,.4);\n    }\n\n    @keyframes neonGlow {\n      from { text-shadow: 0 0 5px rgba(225,63,228,.4); }\n      to   { text-shadow: 0 0 15px rgba(225,63,228,.9); }\n    }\n  ",pink:"\n    body {\n      background: linear-gradient(135deg, #2d1f3d 0%, #614385 50%, #516395 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #ff6e7f, #bfe9ff);\n      color: #2d1f3d;\n      box-shadow: 0 0 15px rgba(255,110,127,.4);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 2px solid #ff6e7f;\n    }\n\n    .items-line__title {\n      color: #ff6e7f;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #ff6e7f, #bfe9ff);\n    }\n  ",aurora:"\n    body {\n      background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #aa4b6b, #6b6b83, #3b8d99);\n      box-shadow: 0 0 20px rgba(170,75,107,.4);\n      transform: scale(1.02);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 2px solid #aa4b6b;\n    }\n\n    .items-line__title {\n      color: #aa4b6b;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #aa4b6b, #6b6b83, #3b8d99);\n    }\n  ",emerald:"\n    body {\n      background: linear-gradient(135deg, #1a2a3a 0%, #2c5364 50%, #203a43 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #43cea2, #185a9d);\n      box-shadow: 0 4px 15px rgba(67,206,162,.4);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #43cea2;\n      box-shadow: 0 0 20px rgba(67,206,162,.4);\n    }\n\n    .items-line__title {\n      color: #43cea2;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #43cea2, #185a9d);\n      box-shadow: 0 4px 15px rgba(67,206,162,.4);\n    }\n  ",flix:"\n    body {\n      background: linear-gradient(135deg, #141414 0%, #1a1a1a 50%, #0f0f0f 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #e50914, #b20710);\n      box-shadow: 0 4px 12px rgba(229,9,20,.5);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #e50914;\n      box-shadow: 0 0 15px rgba(229,9,20,.5);\n    }\n\n    .items-line__title {\n      color: #e50914;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #e50914, #b20710);\n    }\n  ",pulse:"\n    body {\n      background: linear-gradient(135deg, #0a0b1a 0%, #1a1b2f 50%, #0f1023 100%);\n      color: #fff;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #00ddeb, #d800ff);\n      box-shadow: 0 0 15px rgba(0,221,235,.6);\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border: 3px solid #00ddeb;\n      box-shadow: 0 0 15px rgba(0,221,235,.6);\n    }\n\n    .items-line__title {\n      color: #00ddeb;\n      animation: pulseWave 1.8s ease-in-out infinite;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #00ddeb, #d800ff);\n      box-shadow: 0 0 15px rgba(0,221,235,.6);\n    }\n\n    @keyframes pulseWave {\n      0%   { text-shadow: 0 0 4px rgba(0,221,235,.3); }\n      50%  { text-shadow: 0 0 14px rgba(0,221,235,.9); }\n      100% { text-shadow: 0 0 4px rgba(0,221,235,.3); }\n    }\n  ",retro:"\n    body {\n      background: #564335;\n      color: #dfd9ce;\n    }\n\n    .menu__item.focus,\n    .menu__item.hover,\n    .menu__item.traverse,\n    .head__action.focus,\n    .player-panel .button.focus,\n    .settings-folder.focus,\n    .settings-param.focus,\n    .selectbox-item.focus,\n    .full-start__button.focus,\n    .full-descr__tag.focus {\n      background: linear-gradient(to right, #fef4de, #edcfab);\n      color: #000;\n    }\n\n    .card.focus .card__view::after,\n    .card.hover .card__view::after,\n    .card-episode.focus .full-episode::after {\n      border-color: #fef4de;\n    }\n\n    .items-line__title {\n      color: #fef4de;\n    }\n\n    .items-line__more {\n      background: transparent;\n    }\n\n    .items-line__more.focus,\n    .items-line__more.hover {\n      background: linear-gradient(to right, #fef4de, #edcfab);\n      color: #000;\n    }\n  "};$('<style id="fancyface_mod_theme"></style>').html(t[e]||"").appendTo("head")}function D(e){const t=$(e).text().match(/(\d+(\.\d+)?)/);if(!t)return;const n=parseFloat(t[0]);let o="";n>=8?o="lawngreen":n>=6?o="cornflowerblue":n>3?o="orange":n>=0&&(o="red"),o&&$(e).css("color",o)}function G(e){const t=$(e).text().trim(),n={completed:{bg:"rgba(46, 204, 113, 0.8)",text:"white"},canceled:{bg:"rgba(231, 76, 60, 0.8)",text:"white"},ongoing:{bg:"rgba(243, 156, 18, 0.8)",text:"black"},production:{bg:"rgba(52, 152, 219, 0.8)",text:"white"}},o={completed:["Випущено","Завершено","Ended"],canceled:["Скасовано","Canceled"],ongoing:["Виходить","Онгоїнг","Returning Series","Ongoing"],production:["У виробництві","In Production"]};for(const a in o)if(o[a].includes(t))return void $(e).css({"background-color":n[a].bg,color:n[a].text,"border-radius":"0.3em",border:"0px","font-size":"1.3em",display:"inline-block"})}function U(e){const t=$(e).text().trim(),n={kids:["G","TV-Y","TV-G","0+","3+"],children:["PG","TV-PG","TV-Y7","6+","7+"],teens:["PG-13","TV-14","12+","13+","14+"],almostAdult:["R","TV-MA","16+","17+"],adult:["NC-17","18+"]},o={kids:{bg:"#2ecc71",text:"white"},children:{bg:"#3498db",text:"white"},teens:{bg:"#f1c40f",text:"black"},almostAdult:{bg:"#e67e22",text:"white"},adult:{bg:"#e74c3c",text:"white"}};for(const a in n)if(n[a].some((e=>t.includes(e))))return void $(e).css({"background-color":o[a].bg,color:o[a].text,"border-radius":"0.3em","font-size":"1.3em",border:"0px"})}function Y(){Q(),Lampa.Storage.listener.follow("change",(function(e){"menu_hide"!==e.name&&"head_hidden_items"!==e.name&&"settings_hidden_items"!==e.name||Q()})),e.observer=new MutationObserver((t=>{const n=new Set;t.forEach((t=>{"childList"===t.type&&t.addedNodes.length&&t.addedNodes.forEach((t=>{if(1!==t.nodeType)return;const o=$(t);let a;a=o.is('.menu__item[data-action="edit"]')?o:o.find('.menu__item[data-action="edit"]'),a.length>0&&a.off("hover:enter").on("hover:enter",(function(){Lampa.Settings.create("menu_filter")})),(o.is(".menu__list, .head__actions, .settings__body")||o.find(".menu__list, .head__actions, .settings__body").length)&&(menuTouched=!0),e.settings.show_movie_type&&(o.hasClass("card")&&n.add(t),o.find(".card").each(((e,t)=>n.add(t)))),e.settings.colored_ratings&&o.find(".card__vote, .full-start__rate, .full-start-new__rate").each(((e,t)=>D(t))),e.settings.colored_elements&&(o.hasClass("full-start__status")&&G(t),o.find(".full-start__status").each(((e,t)=>G(t))),o.hasClass("full-start__pg")&&U(t),o.find(".full-start__pg").each(((e,t)=>U(t))))})),e.settings.show_movie_type&&"attributes"===t.type&&$(t.target).hasClass("card")&&n.add(t.target)})),n.size&&requestAnimationFrame((()=>n.forEach((t=>function(t){e.settings.show_movie_type&&($(t).find(".content-label").remove(),W(t))}(t)))))})),e.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","data-card","data-type"]})}function q(){const e=Lampa.Storage.get("menu_hide",[]);$(".menu__item").each((function(){const t=$(this);if("edit"===t.data("action")){const e=t.closest(".menu__case");if(e.length>0){const t=e.prev(".menu__split");e.addClass("hidden"),t.length>0&&t.addClass("hidden")}else t.addClass("hidden");return}const n=t.find(".menu__text");if(0===n.length)return;const o=n.text().trim();e.includes(o)?t.addClass("hidden"):t.removeClass("hidden")}))}function J(){const e=Lampa.Storage.get("head_hidden_items",[]);$(".head__action, .head__time").each((function(){const t=$(this);if(t.hasClass("processing"))return;const n=t.attr("class").split(" ");let o=[];for(let e=0;e<n.length;e++)0!==n[e].indexOf("open--")&&"full--screen"!==n[e]&&"notice--icon"!==n[e]&&"head__time"!==n[e]||o.push(n[e]);const a=o.join("_");a&&(e.includes(a)?t.addClass("hidden"):t.removeClass("hidden"))}))}function K(){const e=Lampa.Storage.get("settings_hidden_items",[]);$(".settings-folder").each((function(){const t=$(this),n=t.data("component");n&&"fancy_mod"!==n&&(e.includes(n)?t.addClass("hidden"):t.removeClass("hidden"))}))}function Q(){q(),J(),K()}function X(){Lampa.Manifest.plugins={name:"FancyFace",version:e.version,description:Lampa.Lang.translate("plugin_fancy_description"),author:"@Niaros"},Lampa.SettingsApi.addComponent({component:"fancy_mod",name:Lampa.Lang.translate("additional_interface_settings"),icon:'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 5C4 4.44772 4.44772 4 5 4H19C19.5523 4 20 4.44772 20 5V7C20 7.55228 19.5523 8 19 8H5C4.44772 8 4 7.55228 4 7V5Z" stroke="white" stroke-width="2"/><path d="M4 11C4 10.4477 4.44772 10 5 10H19C19.5523 10 20 10.4477 20 11V13C20 13.5523 19.5523 14 19 14H5C4.44772 14 4 13.5523 4 13V11Z" stroke="white" stroke-width="2"/><path d="M4 17C4 16.4477 4.44772 16 5 16H19C19.5523 16 20 16.4477 20 17V19C20 19.5523 19.5523 20 19 20H5C4.44772 20 4 19.5523 4 19V17Z" stroke="white" stroke-width="2"/></svg>'}),Lampa.SettingsApi.addComponent({component:"menu_filter",name:Lampa.Lang.translate("menu_items_hide"),description:Lampa.Lang.translate("hide_description"),icon:'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="white" stroke-width="2"/></svg>'}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"theme",type:"select",values:{default:"Немає",neon:"Neon",pink:"Pink",aurora:"Aurora",emerald:"Emerald",flix:"Flix",pulse:"Pulse",retro:"Retro"},default:"default"},field:{name:Lampa.Lang.translate("interface_theme_title"),description:Lampa.Lang.translate("interface_theme_description")},onChange:function(t){e.settings.theme=t,Lampa.Storage.set("theme",t),Z(t)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"buttons_editor",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("buttons_editor_title"),description:Lampa.Lang.translate("buttons_editor_description")},onChange:function(t){setTimeout((function(){e.settings.buttons_editor=t,Lampa.Settings.update();"true"===String(t)?($(".button--edit-order").show(),Lampa.Noty.show(Lampa.Lang.translate("buttons_editor_on"))):($(".button--edit-order").hide(),Lampa.Noty.show(Lampa.Lang.translate("buttons_editor_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"show_poster_info",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("poster_info_title"),description:Lampa.Lang.translate("poster_info_description")},onChange:function(t){setTimeout((function(){e.settings.show_poster_info=t,Lampa.Settings.update();const n="true"===String(t);let o=Lampa.Activity.all().find((e=>"full"===e.component));o&&o.activity&&o.activity.refresh&&o.activity.refresh(),Lampa.Noty.show(Lampa.Lang.translate(n?"poster_info_on":"poster_info_off"))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"label_position",type:"select",values:{"top-right":Lampa.Lang.translate("label_top_right"),"top-left":Lampa.Lang.translate("label_top_left"),"bottom-right":Lampa.Lang.translate("label_bottom_right"),"bottom-left":Lampa.Lang.translate("label_bottom_left")},default:"top-right"},field:{name:Lampa.Lang.translate("label_position_title"),description:Lampa.Lang.translate("label_position_description")},onChange:function(t){setTimeout((function(){e.settings.label_position=t,Lampa.Settings.update(),Lampa.Noty.show(Lampa.Lang.translate("label_position_changed"));let n=Lampa.Activity.all().find((e=>"full"===e.component));n&&n.activity&&n.activity.refresh&&n.activity.refresh()}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"show_movie_type",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("change_labels_title"),description:Lampa.Lang.translate("change_labels_description")},onChange:function(t){setTimeout((function(){e.settings.show_movie_type=t,Lampa.Settings.update();const n="true"===String(t);$("body").attr("data-movie-labels",n?"on":"off"),n?($(".card").each((function(){W(this)})),Lampa.Noty.show(Lampa.Lang.translate("change_labels_on"))):($(".content-label").remove(),Lampa.Noty.show(Lampa.Lang.translate("change_labels_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"colored_ratings",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("colored_ratings_title"),description:Lampa.Lang.translate("colored_ratings_description")},onChange:function(t){setTimeout((function(){e.settings.colored_ratings=t,Lampa.Settings.update();"true"===String(t)?($(".card__vote, .full-start__rate, .full-start-new__rate").each((function(){D(this)})),Lampa.Noty.show(Lampa.Lang.translate("colored_ratings_on"))):($(".card__vote, .full-start__rate, .full-start-new__rate").css("color",""),Lampa.Noty.show(Lampa.Lang.translate("colored_ratings_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"colored_elements",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("colored_elements_title"),description:Lampa.Lang.translate("colored_elements_description")},onChange:function(t){setTimeout((function(){e.settings.colored_elements=t,Lampa.Settings.update();"true"===String(t)?($(".full-start__status").each((function(){G(this)})),$(".full-start__pg").each((function(){U(this)})),Lampa.Noty.show(Lampa.Lang.translate("colored_elements_on"))):($(".full-start__status, .full-start__pg").css({"background-color":"",color:"","border-radius":"",border:"","font-size":"",display:""}),Lampa.Noty.show(Lampa.Lang.translate("colored_elements_off")))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{name:"show_original_names",type:"trigger",default:!0},field:{name:Lampa.Lang.translate("show_original_title"),description:Lampa.Lang.translate("show_original_title_description")},onChange:function(t){setTimeout((function(){e.settings.show_original_names=t,Lampa.Settings.update();const n="true"===String(t);let o=Lampa.Activity.all().find((e=>"full"===e.component));o&&o.activity&&o.activity.refresh&&o.activity.refresh(),Lampa.Noty.show(Lampa.Lang.translate(n?"show_original_names_on":"show_original_names_off"))}),100)}}),Lampa.SettingsApi.addParam({component:"fancy_mod",param:{type:"button"},field:{name:Lampa.Lang.translate("menu_items_hide"),description:Lampa.Lang.translate("hide_description")},onChange:function(){Lampa.Settings.create("menu_filter",{onBack:function(){Lampa.Settings.create("fancy_mod")}})}}),Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:t,description:Lampa.Lang.translate("reset_settings")},onChange:function(){Lampa.Storage.set("menu_hide",[]),Lampa.Storage.set("head_hidden_items",[]),Lampa.Storage.set("settings_hidden_items",[]),Q(),$(".menu-hide-item").each((function(){var e=$(this).find(".settings-param__value");e.length&&(e.text(Lampa.Lang.translate("shown")),e.removeClass("menu-hide-hidden").addClass("menu-hide-shown"))}))},onRender:function(e){e.addClass("menu-hide-item");var n=e.find(".settings-param__name"),o=$(`<span class="menu-hide-text">${Lampa.Lang.translate("reset_settings")}</span>`),a=$(t).addClass("menu-hide-icon");n.empty().append(a).append(o),e.find(".settings-param__descr").remove()}});let a=!1,i=!1,s=!1;if(!a){function r(e,t,n){Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:t,description:e},onRender:function(t){t.addClass("menu-hide-item"),t.find(".settings-param__descr").remove();var a=t.find(".settings-param__name");a.find("svg, img").addClass("menu-hide-icon");const i=n.includes(e);var s=$('<div class="settings-param__value"/>').html(o(i)),r=$("<span/>").text(e).addClass("menu-hide-text");a.find("svg, img").after(r),a.append(s),t.off("hover:enter").on("hover:enter",(function(){!function(){const t=Lampa.Storage.get("menu_hide",[]),n=t.indexOf(e);-1!==n?t.splice(n,1):t.push(e),Lampa.Storage.set("menu_hide",t),q();const a=t.includes(e);s.html(o(a))}()}))}})}Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"title"},field:{name:Lampa.Lang.translate("left_menu_title")},onRender:function(e){e.addClass("section-title")}});const e=Lampa.Storage.get("menu_hide",[]),t=[];if($(".menu__item").each((function(){const n=$(this),o=n.find(".menu__text");if(0===o.length)return;if("edit"===n.data("action"))return;const a=o.text().trim();if(t.includes(a))return;t.push(a);const i=n.find(".menu__ico");r(a,i.length?i.html():"•",e)})),!t.includes("Shots")){r("Shots",'<svg><use xlink:href="#sprite-shots"></use></svg>',e)}if(!t.includes("Спорт")&&!t.includes("Sport")){r("Спорт",'\n            <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M256 0C114.617 0 0 114.617 0 256C0 397.383 114.617 512 256 512C397.383 512 512 397.383 512 256C511.842 114.684 397.316 0.157867 256 0ZM265.137 73.8037L354.133 38.2293C364.234 42.8001 374.004 48.0668 383.375 53.9915L383.609 54.1376C392.817 59.9718 401.618 66.4258 409.95 73.4549L410.667 74.0789C414.401 77.261 418.037 80.5557 421.571 83.9584C422.017 84.3957 422.483 84.8117 422.929 85.2587C426.632 88.874 430.221 92.6035 433.692 96.4416C433.98 96.7669 434.254 97.1083 434.542 97.4336C437.587 100.846 440.516 104.379 443.358 107.971C444.042 108.825 444.725 109.679 445.388 110.533C448.47 114.525 451.454 118.587 454.271 122.779L436.529 198.196L349.242 227.295L265.158 160.017L265.137 73.8037ZM66.6037 110.582C67.2661 109.729 67.9413 108.876 68.6251 108.025C71.4302 104.467 74.3355 100.989 77.3376 97.5957C77.6629 97.2373 77.9627 96.8704 78.2837 96.512C81.7313 92.6675 85.3063 88.9392 89.0027 85.3333C89.4283 84.9173 89.8528 84.48 90.2987 84.096C93.804 80.7151 97.4099 77.4401 101.111 74.2752L101.965 73.5584C110.222 66.5809 118.94 60.1665 128.058 54.3584L128.39 54.1451C137.706 48.2341 147.418 42.9732 157.458 38.4L246.863 73.8037V159.991L162.775 227.259L75.488 198.213L57.7461 122.796C60.5748 118.636 63.5286 114.563 66.6037 110.582ZM56.3211 386.945C53.8104 383.118 51.4108 379.22 49.1253 375.254L48.5707 374.295C46.2959 370.347 44.142 366.33 42.112 362.25L42.0416 362.122C37.7657 353.538 34.013 344.703 30.8043 335.666V335.583C29.2875 331.316 27.904 326.946 26.6251 322.55L26.1621 320.929C24.9867 316.784 23.9253 312.608 22.9792 308.404C22.896 307.991 22.7915 307.6 22.7083 307.191C20.6129 297.659 19.1071 288.006 18.1995 278.288L70.2955 215.775L156.979 244.667L182.138 345.292L140.8 400.291L56.3211 386.945ZM312.825 488.046C308.558 489.104 304.179 490.017 299.801 490.837C299.187 490.958 298.563 491.058 297.95 491.171C294.221 491.838 290.45 492.409 286.671 492.875C285.663 493.004 284.662 493.141 283.659 493.263C280.149 493.67 276.608 493.979 273.058 494.234C271.941 494.308 270.837 494.421 269.721 494.492C265.183 494.771 260.608 494.933 256 494.933C251.779 494.933 247.584 494.821 243.413 494.6C242.909 494.6 242.425 494.516 241.92 494.479C238.208 494.267 234.512 493.988 230.825 493.629L230.4 493.55C222.32 492.674 214.289 491.393 206.337 489.712L155.862 410.683L196.55 356.429H315.45L356.804 411.042L312.825 488.046ZM489.355 307.2C489.267 307.609 489.167 308.004 489.079 308.413C488.128 312.615 487.066 316.791 485.896 320.938L485.437 322.559C484.167 326.942 482.772 331.288 481.254 335.591V335.675C478.047 344.712 474.295 353.546 470.017 362.129L469.946 362.258C467.91 366.335 465.756 370.352 463.488 374.304L462.933 375.263C460.666 379.231 458.27 383.125 455.75 386.938L371.558 400.212L329.934 345.258L355.079 244.658L441.762 215.766L493.858 278.279C492.954 288.003 491.45 297.662 489.355 307.2Z" fill="currentColor"></path>\n            </svg>',e)}a=!0}if(Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"space"},field:{},onRender:function(e){e.addClass("section-divider")}}),!i){Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"title"},field:{name:Lampa.Lang.translate("head_title")},onRender:function(e){e.addClass("section-title")}});const e=Lampa.Storage.get("head_hidden_items",[]),t={};$(".head__action, .head__time").each((function(){const a=$(this);if(a.hasClass("processing"))return;const i=a.attr("class").split(" ");let s=[];for(let e=0;e<i.length;e++)0!==i[e].indexOf("open--")&&"full--screen"!==i[e]&&"notice--icon"!==i[e]&&"head__time"!==i[e]||s.push(i[e]);const r=s.join("_");if(!r)return;if(t[r])return;t[r]=!0;let d="";d=r.includes("head__time")?n:a.find("svg").length?a.html():a.find("img").length?`<img src="${a.find("img").attr("src")}" width="30" height="30" style="display:block;">`:"•";let l="",c="";l=r.includes("open--search")?"head_action_search":r.includes("open--broadcast")?"head_action_broadcast":r.includes("open--settings")?"head_action_settings":r.includes("open--feed")?"head_action_feed":r.includes("notice--icon")?"head_action_notice":r.includes("open--profile")?"head_action_profile":r.includes("full--screen")?"head_action_fullscreen":r.includes("head__time")?"head_time":"no_name",c=Lampa.Lang.translate(l),Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:d,description:c},onRender:function(t){t.addClass("menu-hide-item"),t.find(".settings-param__descr").remove();var n=t.find(".settings-param__name");n.find("svg, img").addClass("menu-hide-icon");const a=e.includes(r);var i=$('<div class="settings-param__value"/>').html(o(a)),s=$("<span/>").text(c).addClass("menu-hide-text");n.find("svg, img").after(s),n.append(i),t.off("hover:enter").on("hover:enter",(function(){!function(){const e=Lampa.Storage.get("head_hidden_items",[]),t=e.indexOf(r);-1!==t?e.splice(t,1):e.push(r),Lampa.Storage.set("head_hidden_items",e),J();const n=e.includes(r);i.html(o(n))}()}))}})})),i=!0}if(Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"space"},field:{},onRender:function(e){e.addClass("section-divider")}}),!s){Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"title"},field:{name:Lampa.Lang.translate("settings_title")},onRender:function(e){e.addClass("section-title")}});const e=Lampa.Storage.get("settings_hidden_items",[]),t={};!function n(){const a=$(".settings-folder");0!==a.length?a.each((function(){const n=$(this),a=n.data("component");if(!a)return;if(t[a])return;t[a]=!0;const i=n.find(".settings-folder__name");let s=i.length?i.text().trim():"";const r=n.find(".settings-folder__icon"),d=r.length?r.html():"•";s||(s=Lampa.Lang.translate("no_name")),Lampa.SettingsApi.addParam({component:"menu_filter",param:{type:"button"},field:{name:d,description:s},onRender:function(t){t.addClass("menu-hide-item"),t.find(".settings-param__descr").remove(),"fancy_mod"===a&&t.find(".settings-param").addClass("disable-hide");var n=t.find(".settings-param__name");n.find("svg, img").addClass("menu-hide-icon");const i=e.includes(a);var r=$('<div class="settings-param__value"/>').html(o(i)),d=$("<span/>").text(s).addClass("menu-hide-text");n.find("svg, img").after(d),n.append(r),t.off("hover:enter").on("hover:enter",(function(){!function(){if("fancy_mod"===a)return;const e=Lampa.Storage.get("settings_hidden_items",[]),t=e.indexOf(a);-1!==t?e.splice(t,1):e.push(a),Lampa.Storage.set("settings_hidden_items",e),K();const n=e.includes(a);r.html(o(n))}()}))}})})):setTimeout(n,300)}(),s=!0}Lampa.Listener.follow("full",(e=>{if("complite"!==e.type)return;const t=e.object.activity.render(),n=t.find(".full-start-new__buttons");n.length&&n.addClass("buttons-loading"),setTimeout((()=>{try{t.data("buttons-processed")||(t.data("buttons-processed",!0),V(t)&&(n.length&&n.removeClass("buttons-loading"),H()))}catch(e){n.length&&n.removeClass("buttons-loading")}}),400)}));for(const t in e.settings){const n=e.settings[t];e.settings[t]=Lampa.Storage.get(t,n)}Z(e.settings.theme),Lampa.Listener.follow("full",(e=>{"complite"===e.type&&F(e.data.movie,$(e.object.activity.render()))})),$("body").attr("data-movie-labels",e.settings.show_movie_type?"on":"off"),e.settings.show_movie_type&&$(".card").each(((e,t)=>W(t))),window.title_plugin_inited||(Lampa.Listener.follow("full",(t=>{"complite"===t.type&&t.data.movie&&function(t,n){if($(".original_title",n).remove(),"false"===String(e.settings.show_original_names))return;const o=t.original_title||t.original_name;o&&$(".full-start-new__title",n).after(`<div class="original_title" style="margin-bottom: 2em; text-align: left;">\n          <div style="font-size: 1.2em; opacity: 0.8;">${Lampa.Lang.translate("original_title_label")} ${o}</div>\n      </div>`)}(t.data.movie,t.object.activity.render())})),window.title_plugin_inited=!0),Y(),Lampa.Settings.listener.follow("open",(()=>{setTimeout((()=>{const e=$('.settings-folder[data-component="fancy_mod"]'),t=$('.settings-folder[data-component="interface"]');e.length&&t.length&&e.insertAfter(t),Q()}),100)}))}window.appready?X():Lampa.Listener.follow("app",(e=>{"ready"===e.type&&X()})),window.fancy_mod=e}();